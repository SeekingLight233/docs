<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>浏览器原理与安全防范 | SeekingLight</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="赋时光以生命">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.78041c82.css" as="style"><link rel="preload" href="/assets/js/app.f51dfa38.js" as="script"><link rel="preload" href="/assets/js/3.8b0ceda2.js" as="script"><link rel="preload" href="/assets/js/1.ecdf2037.js" as="script"><link rel="preload" href="/assets/js/30.e76d17dd.js" as="script"><link rel="preload" href="/assets/js/31.045b911d.js" as="script"><link rel="prefetch" href="/assets/js/10.0b49603d.js"><link rel="prefetch" href="/assets/js/11.96c380b0.js"><link rel="prefetch" href="/assets/js/12.a628d70c.js"><link rel="prefetch" href="/assets/js/13.3ac18aca.js"><link rel="prefetch" href="/assets/js/14.5b60bdb3.js"><link rel="prefetch" href="/assets/js/15.f6d47791.js"><link rel="prefetch" href="/assets/js/16.1aa68fc7.js"><link rel="prefetch" href="/assets/js/17.c3450ebd.js"><link rel="prefetch" href="/assets/js/18.a63572b1.js"><link rel="prefetch" href="/assets/js/19.465178e7.js"><link rel="prefetch" href="/assets/js/20.47b0c28e.js"><link rel="prefetch" href="/assets/js/21.4f1ed4a0.js"><link rel="prefetch" href="/assets/js/22.572a3fb1.js"><link rel="prefetch" href="/assets/js/23.daaac9b7.js"><link rel="prefetch" href="/assets/js/24.96dae278.js"><link rel="prefetch" href="/assets/js/25.49026790.js"><link rel="prefetch" href="/assets/js/26.db1fad86.js"><link rel="prefetch" href="/assets/js/27.c2ad1814.js"><link rel="prefetch" href="/assets/js/28.787d9ca0.js"><link rel="prefetch" href="/assets/js/29.cde33c03.js"><link rel="prefetch" href="/assets/js/32.2c7d340b.js"><link rel="prefetch" href="/assets/js/33.000f0f72.js"><link rel="prefetch" href="/assets/js/34.c5b39586.js"><link rel="prefetch" href="/assets/js/35.a9a77a95.js"><link rel="prefetch" href="/assets/js/36.dbc70936.js"><link rel="prefetch" href="/assets/js/37.6fa93c31.js"><link rel="prefetch" href="/assets/js/38.fc9fe7f8.js"><link rel="prefetch" href="/assets/js/39.9c80e2bd.js"><link rel="prefetch" href="/assets/js/4.ff412fc0.js"><link rel="prefetch" href="/assets/js/40.d9741f71.js"><link rel="prefetch" href="/assets/js/41.4ab6c7c3.js"><link rel="prefetch" href="/assets/js/42.b16bf0c1.js"><link rel="prefetch" href="/assets/js/43.8aab9478.js"><link rel="prefetch" href="/assets/js/44.b88e8ddc.js"><link rel="prefetch" href="/assets/js/45.f6b62368.js"><link rel="prefetch" href="/assets/js/46.b8b61cac.js"><link rel="prefetch" href="/assets/js/47.49abbcd5.js"><link rel="prefetch" href="/assets/js/48.985ac72c.js"><link rel="prefetch" href="/assets/js/49.7ec76b9f.js"><link rel="prefetch" href="/assets/js/5.ed86cd32.js"><link rel="prefetch" href="/assets/js/50.e79be434.js"><link rel="prefetch" href="/assets/js/51.f36e5d6f.js"><link rel="prefetch" href="/assets/js/52.a0763ffe.js"><link rel="prefetch" href="/assets/js/53.c25037f3.js"><link rel="prefetch" href="/assets/js/54.88f38554.js"><link rel="prefetch" href="/assets/js/55.71619463.js"><link rel="prefetch" href="/assets/js/56.65919064.js"><link rel="prefetch" href="/assets/js/57.e3f80dc8.js"><link rel="prefetch" href="/assets/js/58.ea325586.js"><link rel="prefetch" href="/assets/js/59.82764e7a.js"><link rel="prefetch" href="/assets/js/6.b35d968f.js"><link rel="prefetch" href="/assets/js/60.a6775d56.js"><link rel="prefetch" href="/assets/js/61.60b43cbe.js"><link rel="prefetch" href="/assets/js/62.5c142d31.js"><link rel="prefetch" href="/assets/js/7.9b2f0ab3.js"><link rel="prefetch" href="/assets/js/8.d272cb11.js"><link rel="prefetch" href="/assets/js/9.ef68ce12.js">
    <link rel="stylesheet" href="/assets/css/0.styles.78041c82.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-19557b78><div data-v-19557b78><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-19557b78 data-v-19557b78><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-64685f0e data-v-19557b78 data-v-19557b78><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>SeekingLight</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>寻光</span>
            
          <span data-v-64685f0e>2017 - </span>
          2022
        </a></span></div></div> <div class="hide" data-v-19557b78><header class="navbar" data-v-19557b78><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/icon.png" alt="SeekingLight" class="logo"> <span class="site-name">SeekingLight</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/杂记/" class="nav-link"><i class="iconfont undefined"></i>
  杂记
</a></li><li class="dropdown-item"><!----> <a href="/categories/前端/" class="nav-link"><i class="iconfont undefined"></i>
  前端
</a></li><li class="dropdown-item"><!----> <a href="/categories/计算机组成原理/" class="nav-link"><i class="iconfont undefined"></i>
  计算机组成原理
</a></li><li class="dropdown-item"><!----> <a href="/categories/Typescript/" class="nav-link"><i class="iconfont undefined"></i>
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/categories/计算机网络/" class="nav-link"><i class="iconfont undefined"></i>
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/categories/算法/" class="nav-link"><i class="iconfont undefined"></i>
  算法
</a></li><li class="dropdown-item"><!----> <a href="/categories/后端/" class="nav-link"><i class="iconfont undefined"></i>
  后端
</a></li><li class="dropdown-item"><!----> <a href="/categories/操作系统/" class="nav-link"><i class="iconfont undefined"></i>
  操作系统
</a></li><li class="dropdown-item"><!----> <a href="/categories/编程范式/" class="nav-link"><i class="iconfont undefined"></i>
  编程范式
</a></li><li class="dropdown-item"><!----> <a href="/categories/色彩空间/" class="nav-link"><i class="iconfont undefined"></i>
  色彩空间
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      关于
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/SeekingLight233" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://space.bilibili.com/37019841?from=search&amp;seid=11160746842115235145" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-bilibili"></i>
  BiliBili
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://music.163.com/#/user/home?id=355059838" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-douyin"></i>
  网易云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/contact.html" class="nav-link"><i class="iconfont reco-wechat"></i>
  联系我
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-19557b78></div> <aside class="sidebar" data-v-19557b78><div class="personal-info-wrapper" data-v-042e23d4><img src="/images/hero.png" alt="author-avatar" class="personal-img" data-v-042e23d4> <h3 class="name" data-v-042e23d4>
    寻光
  </h3> <div class="num" data-v-042e23d4><div data-v-042e23d4><h3 data-v-042e23d4>48</h3> <h6 data-v-042e23d4>Article</h6></div> <div data-v-042e23d4><h3 data-v-042e23d4>87</h3> <h6 data-v-042e23d4>Tag</h6></div></div> <hr data-v-042e23d4></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/杂记/" class="nav-link"><i class="iconfont undefined"></i>
  杂记
</a></li><li class="dropdown-item"><!----> <a href="/categories/前端/" class="nav-link"><i class="iconfont undefined"></i>
  前端
</a></li><li class="dropdown-item"><!----> <a href="/categories/计算机组成原理/" class="nav-link"><i class="iconfont undefined"></i>
  计算机组成原理
</a></li><li class="dropdown-item"><!----> <a href="/categories/Typescript/" class="nav-link"><i class="iconfont undefined"></i>
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/categories/计算机网络/" class="nav-link"><i class="iconfont undefined"></i>
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/categories/算法/" class="nav-link"><i class="iconfont undefined"></i>
  算法
</a></li><li class="dropdown-item"><!----> <a href="/categories/后端/" class="nav-link"><i class="iconfont undefined"></i>
  后端
</a></li><li class="dropdown-item"><!----> <a href="/categories/操作系统/" class="nav-link"><i class="iconfont undefined"></i>
  操作系统
</a></li><li class="dropdown-item"><!----> <a href="/categories/编程范式/" class="nav-link"><i class="iconfont undefined"></i>
  编程范式
</a></li><li class="dropdown-item"><!----> <a href="/categories/色彩空间/" class="nav-link"><i class="iconfont undefined"></i>
  色彩空间
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      关于
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/SeekingLight233" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://space.bilibili.com/37019841?from=search&amp;seid=11160746842115235145" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-bilibili"></i>
  BiliBili
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://music.163.com/#/user/home?id=355059838" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-douyin"></i>
  网易云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/contact.html" class="nav-link"><i class="iconfont reco-wechat"></i>
  联系我
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>浏览器原理与安全防范</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/%E6%B5%8F%E8%A7%88%E5%99%A8.html#跨域" class="sidebar-link">跨域</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/%E6%B5%8F%E8%A7%88%E5%99%A8.html#cors" class="sidebar-link">CORS</a></li><li class="sidebar-sub-header"><a href="/docs/%E6%B5%8F%E8%A7%88%E5%99%A8.html#jsonp" class="sidebar-link">JSONP</a></li><li class="sidebar-sub-header"><a href="/docs/%E6%B5%8F%E8%A7%88%E5%99%A8.html#关于资源地址" class="sidebar-link">关于资源地址</a></li></ul></li><li><a href="/docs/%E6%B5%8F%E8%A7%88%E5%99%A8.html#存储" class="sidebar-link">存储</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/%E6%B5%8F%E8%A7%88%E5%99%A8.html#cookie" class="sidebar-link">cookie</a></li><li class="sidebar-sub-header"><a href="/docs/%E6%B5%8F%E8%A7%88%E5%99%A8.html#cookie-的结构" class="sidebar-link">cookie 的结构</a></li><li class="sidebar-sub-header"><a href="/docs/%E6%B5%8F%E8%A7%88%E5%99%A8.html#localstorage" class="sidebar-link">localStorage</a></li><li class="sidebar-sub-header"><a href="/docs/%E6%B5%8F%E8%A7%88%E5%99%A8.html#sessionstorage" class="sidebar-link">sessionStorage</a></li><li class="sidebar-sub-header"><a href="/docs/%E6%B5%8F%E8%A7%88%E5%99%A8.html#indexdb" class="sidebar-link">indexDB</a></li></ul></li><li><a href="/docs/%E6%B5%8F%E8%A7%88%E5%99%A8.html#页面加载过程" class="sidebar-link">页面加载过程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/%E6%B5%8F%E8%A7%88%E5%99%A8.html#资源加载阶段" class="sidebar-link">资源加载阶段</a></li><li class="sidebar-sub-header"><a href="/docs/%E6%B5%8F%E8%A7%88%E5%99%A8.html#资源渲染阶段" class="sidebar-link">资源渲染阶段</a></li></ul></li><li><a href="/docs/%E6%B5%8F%E8%A7%88%E5%99%A8.html#安全" class="sidebar-link">安全</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/%E6%B5%8F%E8%A7%88%E5%99%A8.html#xss-跨站请求攻击" class="sidebar-link">XSS 跨站请求攻击</a></li><li class="sidebar-sub-header"><a href="/docs/%E6%B5%8F%E8%A7%88%E5%99%A8.html#xsrf-跨站请求伪造" class="sidebar-link">XSRF 跨站请求伪造</a></li><li class="sidebar-sub-header"><a href="/docs/%E6%B5%8F%E8%A7%88%E5%99%A8.html#点击劫持" class="sidebar-link">点击劫持</a></li><li class="sidebar-sub-header"><a href="/docs/%E6%B5%8F%E8%A7%88%E5%99%A8.html#ddos" class="sidebar-link">DDOS</a></li></ul></li><li><a href="/docs/%E6%B5%8F%E8%A7%88%E5%99%A8.html#相关面试题" class="sidebar-link">相关面试题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/%E6%B5%8F%E8%A7%88%E5%99%A8.html#script-中的-defer-和-async" class="sidebar-link">script 中的 defer 和 async</a></li><li class="sidebar-sub-header"><a href="/docs/%E6%B5%8F%E8%A7%88%E5%99%A8.html#link-中的-preload-和-prefetch" class="sidebar-link">link 中的 preload 和 prefetch</a></li><li class="sidebar-sub-header"><a href="/docs/%E6%B5%8F%E8%A7%88%E5%99%A8.html#link-中的-dns-prefetch-和-preconnect" class="sidebar-link">link 中的 dns-prefetch 和 preconnect</a></li></ul></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-64685f0e data-v-19557b78><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>浏览器原理与安全防范</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>寻光</span>
            
          <span data-v-64685f0e>2017 - </span>
          2022
        </a></span></div></div> <div data-v-19557b78><main class="page"><div class="page-title" style="display:none;"><h1>浏览器原理与安全防范</h1> <hr> <div data-v-34ea29db><i class="iconfont reco-account" data-v-34ea29db><span data-v-34ea29db>寻光</span></i> <i class="iconfont reco-date" data-v-34ea29db><span data-v-34ea29db>2020-08-01</span></i> <!----> <!----></div></div> <div class="theme-reco-content content__default" style="display:none;"><h2 id="跨域"><a href="#跨域" class="header-anchor">#</a> 跨域</h2> <p>博文参考:<a href="https://segmentfault.com/a/1190000012469713#articleHeader9" target="_blank" rel="noopener noreferrer">ajax 跨域，这应该是最全的解决方案了<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>要理解<strong>跨域</strong>，首先我们需要理解<strong>同源策略</strong>。</p> <p><strong>同源</strong>是在 1995 年由网景公司提出来的一个策略，这个策略的最初的主要内容是：</p> <blockquote><p>A 网页如果设置了 cookie，那么 B 网页不能打开。</p></blockquote> <p>我们很容易能够看出这个策略的主要目的是为了安全，现如今所有的浏览器都支持这个策略。</p> <p>随着互联网的发展，同源策略也越来越严格，只要你的<strong>协议</strong>，<strong>域名</strong>和<strong>端口</strong>有一个不一样，浏览器都会将你的请求视为<strong>跨域</strong>访问,下面这三种行为都会受到限制：</p> <ol><li>用户信息(<code>cookie</code>,<code>localStorage</code>,<code>indexedDB</code>)</li> <li><code>iframe</code></li> <li>网络请求</li></ol> <p>当你发一个请求给一个非同源的服务器时，你会得到这条警告信息：<img src="/assets/img/10.a6dc73ec.png" alt=""></p> <h3 id="cors"><a href="#cors" class="header-anchor">#</a> CORS</h3> <p><strong>CORS</strong>全称为<code>Cross-origin resource sharing</code>,这是一个 W3C 的标准，它允许浏览器向非同源服务器发送请求。</p> <p>这个主要靠后端开启，但是存在兼容问题。</p> <h3 id="jsonp"><a href="#jsonp" class="header-anchor">#</a> JSONP</h3> <p><strong>JSONP</strong>全称为<code>JSON with padding</code></p> <p>这种方式发起请求会从后端得到“被包裹的 JSON 数据”，大概像这样</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'hax'</span><span class="token punctuation">,</span> gender<span class="token operator">:</span> <span class="token string">'Male'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>其中<code>callback</code>是用户在发起请求时传过去的参数，我们实际要得到的数据会包裹在函数的参数中，我们可以在本地定义这个函数的具体操作，然后再通过<code>script</code>标签“云调用”一下这个函数，就可以完成我们的跨域请求啦~~</p> <p>这种方式的主要原理还是利用了<code>script</code>标签没有跨域限制的漏洞，<span id="所以我个人不是很喜欢这种方式，感觉是在“卡bug”，给人一种将错就错的感觉。" style="background-color:#24292e;" data-v-8f7cfc2c>
    所以我个人不是很喜欢这种方式，感觉是在“卡bug”，给人一种将错就错的感觉。
</span>来间接实现跨域访问。</p> <p>这种方式相比较 CORS 来说兼容性会更好一些。</p> <h3 id="关于资源地址"><a href="#关于资源地址" class="header-anchor">#</a> 关于资源地址</h3> <p>当请求资源时(<code>css</code>,<code>js</code>,<code>img</code>)并不会触发同源限制，利用这个特性，我们可以：</p> <ol><li>用<img>来统计访问量(PV,UV)。</li> <li><code>link</code>和<code>script</code>标签可以使用 CDN</li></ol> <h2 id="存储"><a href="#存储" class="header-anchor">#</a> 存储</h2> <h3 id="cookie"><a href="#cookie" class="header-anchor">#</a> cookie</h3> <p><code>cookie</code>是一种超小型的文本文件，由网景公司的某个员工发明，是网站为了辨别用户身份而存储在用户本地的非常小的数据(只有 4K)。</p> <p><code>cookie</code>会被设置在<code>HTTP</code>的<code>header</code>中，会对请求有性能影响。</p> <p><code>cookie</code>由服务器端生成，存储在客户端，可以设置过期时间。
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA08AAAAwCAYAAADJokGTAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAABOeSURBVHhe7ZzPy2VXVobzP/gfZCxEcJyRJBlHB9IZ6cTgxJEI7czYCA4MOLAd2fQgaE9aggqNiiKSbgJBFH9AuhN1UghCEoJKNerg6vOl3vDmrbXP2fdWpSyT94HNPWfvtddev875vlX3S565lFJKKaWUUko5pc1TKaWUUkoppWzQ5qmUUkoppZRSNmjzVEoppZRSSikbtHkqpZRSSimllA3aPJVSSimllFLKBm2eSimllFJKKWWDR2qe3vj9dy4/90vfutz/4X89mClPgvv3719effXVyxtvvPFgZs1rr712eemlly4ffPDBg5lSSimllFLKLbR5Gvjgo/+4vPiVr1+++84/PZh5umjzVEoppZRSypOnzdPAF6l5KqWUUkoppTwermqeaJJoln7kR7/66fDmKdd/7MVfv3z/H//1bk1MOtSk8EnTQvMifuX179wNoFn7xV9989P9b/7x397J5znIS3fqQwfrfEpG+tU0ad6HZHZ59913L88999zlmWeeuRv57Q+Nj9YY2Qi99dZbn1nnGySRzZPuOY9zwfWvvnnKM7gvpZRSSimlzGw3T2p6vInwb56mdZohb2wmGWeneaKRQY45dP/139+708kaMC+bgHnXKR3SiW3oUQMHaqJ87hrUOK2aERobb2j45F7NEPu8EVJzpAbKm6dcS9A1NU95xpnNpZRSSimlfNnZbp5oMn7657/50Lc4alRYf+Erv/WZb4DULKmxmZojZ6d50nk+zydr7MNGtyEbIdcBaSPknmuhkVk1M/mtkeCeedan/d4EScfrr79+N7c6C1bNE3vShuncUkoppZRSyidsN09TY+ONyKoxWjU/E4/aPOlbJP9zO40n1TytmiOhb5nyGx41Offu3Rv3883Qiy++ePepM/hTO//2aGJqnnx/jjZPpZRSSimlzDy25ulp/eYpcR3wuJsnOPoGZ9Vc3fLNE3uYP2qgpuYJ0L9q8EoppZRSSikPs908ZUNBs8E3OmpE1ISooQFkvBmSDpdxsgHTGZL3xoc5zfOp5odrb44S1wGyW/th8iV5//33Ly+88MLllVdeuXz00UcPZj+BhoVv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" alt="">;</p> <div class="custom-block warning"><p>cookie 语法的键值对是用等于号隔开的，这点需要注意。</p></div> <h3 id="cookie-的结构"><a href="#cookie-的结构" class="header-anchor">#</a> cookie 的结构</h3> <ul><li>name: cookie 的名字</li> <li>value: cookie 的值</li> <li>Expires/Max-Age: 超时时间</li> <li>HttpOnly: 只允许 http 使用,可以防止 XSS</li> <li>SameSite: 和防止 CSRF 有关</li></ul> <h3 id="localstorage"><a href="#localstorage" class="header-anchor">#</a> localStorage</h3> <p><a href="/docs/js对象常用api整理.html#localstorage全局对象">localStorage 的简单使用</a></p> <p><code>localStorage</code>的生命周期为永久，除非用户手动清理。</p> <p><code>localStorage</code>的数据大小有 5M。</p> <h3 id="sessionstorage"><a href="#sessionstorage" class="header-anchor">#</a> sessionStorage</h3> <p><code>sessionStorage</code>与<code>localStorage</code>的最大区别体现在生命周期上 ，一旦浏览器关闭则被清理。</p> <h3 id="indexdb"><a href="#indexdb" class="header-anchor">#</a> indexDB</h3> <p>如果<code>localStorage</code>存不下的话我们可以上浏览器中的这个数据库。</p> <h2 id="页面加载过程"><a href="#页面加载过程" class="header-anchor">#</a> 页面加载过程</h2> <p>这块的内容可以用来回答那个被问烂了的的问题<span id="Q:你梭梭当你输入url时发生了啥？A：不好意思面试官我先喝口水" style="background-color:#24292e;" data-v-8f7cfc2c>
    Q:你梭梭当你输入url时发生了啥？A：不好意思面试官我先喝口水
</span>,但全部展开这块内容能涉及到网络，计算机图形学，操作系统甚至是编译原理，<span id="我只是一个小蒟蒻鸭你总不能这样为难我" style="background-color:#24292e;" data-v-8f7cfc2c>
    我只是一个小蒟蒻鸭你总不能这样为难我
</span>所以尽量站在前端的角度把这个问题回答好吧。</p> <p>总的来说可以分为<strong>资源加载阶段</strong>和<strong>资源渲染阶段</strong>。</p> <p>这里我们默认资源的类型是<strong>HTML</strong>。</p> <h3 id="资源加载阶段"><a href="#资源加载阶段" class="header-anchor">#</a> 资源加载阶段</h3> <ol><li>浏览器根据 DNS 服务器找到服务器的 ip 地址。</li> <li>浏览器向这个 ip 发请求 =&gt; 服务器处理并返回请求。</li></ol> <h3 id="资源渲染阶段"><a href="#资源渲染阶段" class="header-anchor">#</a> 资源渲染阶段</h3> <p>这部分就是我们前端要详细回答的阶段了。</p> <h4 id="一、dom-树生成"><a href="#一、dom-树生成" class="header-anchor">#</a> 一、dom 树生成</h4> <ol><li>首先浏览器在拿到<code>HTML</code>文件前要先在计算机中<strong>开辟出内存</strong>，同时为<code>HTML</code><strong>分配一个主线程</strong>去一行行解析和执行代码。</li> <li>在主线程解析的过程中，如果遇到了外部静态资源(<code>link</code>,<code>script</code>,<code>img</code>),此时会开辟一个<strong>新的任务队列和新的副线程</strong>去加载这些资源文件，而主线程继续向下解析代码。</li> <li>当主线程从上往下执行完后，会生成<strong>dom 树</strong>。<div class="custom-block warning"><p>假如说你现在打开一个网页，在加载的过程中你直接把网线给拔了，有很大几率你会碰到一个没有样式表的网页，因为此时 css 资源已经回不来了。。</p></div></li></ol> <p>因此建议将 css 放在 head 中，提前加载。
:::</p> <h4 id="二、event-loop-生成-cssom"><a href="#二、event-loop-生成-cssom" class="header-anchor">#</a> 二、Event Loop 生成 CSSom</h4> <p>主线程解析完后，就会进入<a href="/docs/Javascript执行过程分析.html#event-loop">Event Loop</a>阶段，当任务队列里的 css 静态资源都加载完后，此时会生成<strong>CSSom</strong>。</p> <h4 id="三、生成渲染树"><a href="#三、生成渲染树" class="header-anchor">#</a> 三、生成渲染树</h4> <p>当<strong>dom 树</strong>和<strong>CSSom</strong>都到齐了之后，此时他们俩会结合生成一颗<strong>Render tree</strong>。</p> <h4 id="四、计算布局"><a href="#四、计算布局" class="header-anchor">#</a> 四、计算布局</h4> <p>根据生成的渲染树以及视窗(viewport)大小，计算每个 dom 节点的<code>layout</code>信息(位置，大小),最终生成分层树</p> <p>如果由于渲染树中的某些属性的更改，而引发布局的更改，就会引发<strong>回流</strong>。</p> <div class="custom-block tip"><p>影响回流的具体操作</p> <ol><li>添加/删除 元素（display 也算）</li> <li>元素位置发生变化（可以使用<code>transform</code>，只会触发复合图层）</li> <li>更改 style</li> <li>修改浏览器大小，字体大小</li></ol> <p>最佳实践：<strong>避免回流</strong>/<strong>读写分离</strong></p></div> <div class="custom-block tip"><p>在布局和绘制阶段，你可以使用<code>will-change</code>来创建新的图层。
有些浏览器为了进行渲染优化会默认将一些属性提取到新的图层，比如<code>transform，opacity，fixed,z-index等等</code></p></div> <h4 id="五、绘制与合成"><a href="#五、绘制与合成" class="header-anchor">#</a> 五、绘制与合成</h4> <p>首先要为每个图层生成一个绘制列表(绘制指令),这些指令交给合成线程后,合成线程会将图层分成图块,并将图块进行光栅化成像素图.</p> <p>最后合成线程会把绘制指令统一发送给浏览器的进程,浏览器通过调用内部的相关 api 最终会生成出页面.</p> <h2 id="安全"><a href="#安全" class="header-anchor">#</a> 安全</h2> <h3 id="xss-跨站请求攻击"><a href="#xss-跨站请求攻击" class="header-anchor">#</a> XSS 跨站请求攻击</h3> <p><strong>XSS</strong>全称为<code>Cross Site Scripting</code><span id="如果缩写是CSS就和那个CSS混了" style="background-color:#24292e;" data-v-8f7cfc2c>
    如果缩写是CSS就和那个CSS混了
</span></p> <p>攻击者会想尽一切办法将 script 代码注入到网页中，从而执行自己的攻击操作。</p> <h4 id="存储性-xss-攻击"><a href="#存储性-xss-攻击" class="header-anchor">#</a> 存储性 XSS 攻击</h4> <p><img src="/assets/img/10.2ed3d8b9.png" alt=""></p> <p>案例:2015 喜马拉雅</p> <p>当时喜马拉雅的技术没有对&quot;专辑名称&quot;这个输入框进行 XSS 过滤,黑客就可以通过这个输入框把恶意代码存储到服务器的数据库里</p> <p>如果别的用户打开这个专辑,那么这段代码就被注进去了</p> <h4 id="反射型-xss-攻击"><a href="#反射型-xss-攻击" class="header-anchor">#</a> 反射型 XSS 攻击</h4> <p>这种攻击的恶意代码写在 url 的参数上,黑客往往会诱导受害者去点击这些链接</p> <h4 id="基于-dom-的-xss-攻击"><a href="#基于-dom-的-xss-攻击" class="header-anchor">#</a> 基于 Dom 的 XSS 攻击</h4> <p>这种攻击一般是由于 html 在传输的过程中就被人给改了,XSS 只是发起攻击的配合手段</p> <h4 id="解决方法"><a href="#解决方法" class="header-anchor">#</a> 解决方法</h4> <ol><li>尖括号转码或 script 内容过滤</li> <li>httpOnly 这样 document.cookie 无法读取</li> <li>开启 CSP 白名单,可以通过 meta 标签或在 http 头部设置<code>Content-Security-Policy</code>字段</li> <li>用 react 或 vue，因为有虚拟 dom。</li></ol> <h3 id="xsrf-跨站请求伪造"><a href="#xsrf-跨站请求伪造" class="header-anchor">#</a> XSRF 跨站请求伪造</h3> <p>通过模拟登陆状态的用户,窃取受害人相关信息</p> <p>案例:2007 Gmail</p> <p>谷歌的某高官曾不小心点了一个恶意链接,点完这个链接后没几天自己的域名被盗了.</p> <p>原因就是当他点完这个链接后,
其实从黑客的网站上带着他的 cookie 往 Gmail 上提交了一个恶意请求,这个恶意请求
会调用 Gmail 上的一些接口,然后偷偷设置了转发规则,于是邮件就被窃取了</p> <h4 id="解决办法"><a href="#解决办法" class="header-anchor">#</a> 解决办法</h4> <ol><li><p>cookie 上设置 SameSite 属性,最好设置为 lax,这样服务器默认就不会接受第三方的 Cookie 了(但导航到外链依旧可以)</p></li> <li><p>验证请求的来源地址(主要依靠请求头的 referer 和 origin 属性)</p></li> <li><p>重要的接口加短信验证码，生物认证。</p></li></ol> <h3 id="点击劫持"><a href="#点击劫持" class="header-anchor">#</a> 点击劫持</h3> <p>钓鱼网站中比较常见的攻击手段，网站背后其实有一个<strong>透明度为 0</strong>的 iframe。</p> <h4 id="解决方案"><a href="#解决方案" class="header-anchor">#</a> 解决方案</h4> <p>http 的 header 中设置 <code>X-Frame-Options:SAMEORIGIN</code></p> <h3 id="ddos"><a href="#ddos" class="header-anchor">#</a> DDOS</h3> <p>以前流行一个词叫“抓肉鸡”，意思是用病毒去感染用户的终端设备，一旦感染成功，这台设备就成了“肉鸡”，就可以对指定的服务发起DDOS。</p> <p>这个不太好预防，有一些iass提供商会提供WAF服务。</p> <h2 id="相关面试题"><a href="#相关面试题" class="header-anchor">#</a> 相关面试题</h2> <h3 id="script-中的-defer-和-async"><a href="#script-中的-defer-和-async" class="header-anchor">#</a> script 中的 defer 和 async</h3> <p>正常情况下，浏览器解析到 script 标签时，会停止 dom 解析，然后去下载 js 脚本，下载完之后再去执行，这个过程是完全同步的。</p> <p>如果加了 async，js 脚本在下载的过程中就不会阻塞浏览器解析 dom，等到脚本下载完毕后再去执行。</p> <p>defer 则会更极端一些，会等浏览器解析完别的标签，最后才去解析 js 脚本。</p> <p>他们都会并行的去下载 js 脚本。</p> <h3 id="link-中的-preload-和-prefetch"><a href="#link-中的-preload-和-prefetch" class="header-anchor">#</a> link 中的 preload 和 prefetch</h3> <p>正常情况下浏览器要解析到 script 标签时，才会去下载脚本。如果想让浏览器提前下载，就可以用 link 标签的 preload 属性。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>JS and CSS preload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!-- preload --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>preload<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>style.css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>style<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>preload<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>script<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

  <span class="token comment">&lt;!-- prefetch --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prefetch<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>other.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>script<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>prefetch 代表的是预取，优先级很低，只会在浏览器空闲时去加载该资源。所以我们可以预判用户要进入哪个页面，然后去预先加载这个页面的资源。</p> <div class="custom-block tip"><p>rel 属性全称 relationship，代表当前文档与被链接资源的关系。</p></div> <div class="custom-block tip"><p>prefetch 和 preload 都会命中强制缓存。</p></div> <h3 id="link-中的-dns-prefetch-和-preconnect"><a href="#link-中的-dns-prefetch-和-preconnect" class="header-anchor">#</a> link 中的 dns-prefetch 和 preconnect</h3> <p>顾名思义，一个可以预先解析 dns，一个可以发起预连接。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dns-prefetch<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://fonts.gstatic.com/<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>preconnect<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://fonts.gstatic.com/<span class="token punctuation">&quot;</span></span> <span class="token attr-name">crossorigin</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></div> <footer class="page-edit" style="display:none;"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">3/28/2022, 10:14:35 AM</span></div></footer> <!----> <!----></main> <!----></div></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f51dfa38.js" defer></script><script src="/assets/js/3.8b0ceda2.js" defer></script><script src="/assets/js/1.ecdf2037.js" defer></script><script src="/assets/js/30.e76d17dd.js" defer></script><script src="/assets/js/31.045b911d.js" defer></script>
  </body>
</html>
