<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>sqlè¯­å¥å­¦ä¹ ç¬”è®°(sql-server) | SeekingLight</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="èµ‹æ—¶å…‰ä»¥ç”Ÿå‘½">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.78041c82.css" as="style"><link rel="preload" href="/assets/js/app.4d15b3ce.js" as="script"><link rel="preload" href="/assets/js/3.8b0ceda2.js" as="script"><link rel="preload" href="/assets/js/1.ecdf2037.js" as="script"><link rel="preload" href="/assets/js/55.ec8677c2.js" as="script"><link rel="prefetch" href="/assets/js/10.5c997883.js"><link rel="prefetch" href="/assets/js/11.9bb87ee0.js"><link rel="prefetch" href="/assets/js/12.1bd6a3da.js"><link rel="prefetch" href="/assets/js/13.bb8170cf.js"><link rel="prefetch" href="/assets/js/14.94564b96.js"><link rel="prefetch" href="/assets/js/15.db064408.js"><link rel="prefetch" href="/assets/js/16.0c2439dc.js"><link rel="prefetch" href="/assets/js/17.7c5b96e4.js"><link rel="prefetch" href="/assets/js/18.6918828a.js"><link rel="prefetch" href="/assets/js/19.347abfc3.js"><link rel="prefetch" href="/assets/js/20.59bbd9ca.js"><link rel="prefetch" href="/assets/js/21.08b57689.js"><link rel="prefetch" href="/assets/js/22.2f773398.js"><link rel="prefetch" href="/assets/js/23.559109a9.js"><link rel="prefetch" href="/assets/js/24.96dae278.js"><link rel="prefetch" href="/assets/js/25.49026790.js"><link rel="prefetch" href="/assets/js/26.3e696b7f.js"><link rel="prefetch" href="/assets/js/27.964cdf16.js"><link rel="prefetch" href="/assets/js/28.dae74634.js"><link rel="prefetch" href="/assets/js/29.d37e9acb.js"><link rel="prefetch" href="/assets/js/30.882bd691.js"><link rel="prefetch" href="/assets/js/31.045b911d.js"><link rel="prefetch" href="/assets/js/32.42fbf541.js"><link rel="prefetch" href="/assets/js/33.000f0f72.js"><link rel="prefetch" href="/assets/js/34.b484515f.js"><link rel="prefetch" href="/assets/js/35.3dd430f5.js"><link rel="prefetch" href="/assets/js/36.303d6e5b.js"><link rel="prefetch" href="/assets/js/37.bfa9e033.js"><link rel="prefetch" href="/assets/js/38.bf80c844.js"><link rel="prefetch" href="/assets/js/39.5a128a4d.js"><link rel="prefetch" href="/assets/js/4.ff412fc0.js"><link rel="prefetch" href="/assets/js/40.d9741f71.js"><link rel="prefetch" href="/assets/js/41.7b42dd78.js"><link rel="prefetch" href="/assets/js/42.d5758950.js"><link rel="prefetch" href="/assets/js/43.fd82d19f.js"><link rel="prefetch" href="/assets/js/44.f6b0d30f.js"><link rel="prefetch" href="/assets/js/45.f8bb2eb9.js"><link rel="prefetch" href="/assets/js/46.b8b61cac.js"><link rel="prefetch" href="/assets/js/47.49abbcd5.js"><link rel="prefetch" href="/assets/js/48.d29e0d0d.js"><link rel="prefetch" href="/assets/js/49.d2c33c92.js"><link rel="prefetch" href="/assets/js/5.ed86cd32.js"><link rel="prefetch" href="/assets/js/50.7927818b.js"><link rel="prefetch" href="/assets/js/51.415c4fe8.js"><link rel="prefetch" href="/assets/js/52.758484f3.js"><link rel="prefetch" href="/assets/js/53.60c8b2d4.js"><link rel="prefetch" href="/assets/js/54.239baec0.js"><link rel="prefetch" href="/assets/js/56.1e1752e4.js"><link rel="prefetch" href="/assets/js/57.b5f3c61e.js"><link rel="prefetch" href="/assets/js/58.9feb07bb.js"><link rel="prefetch" href="/assets/js/59.2f437726.js"><link rel="prefetch" href="/assets/js/6.da9e88e2.js"><link rel="prefetch" href="/assets/js/60.39f6575b.js"><link rel="prefetch" href="/assets/js/7.658f24fb.js"><link rel="prefetch" href="/assets/js/8.a79692de.js"><link rel="prefetch" href="/assets/js/9.ef68ce12.js">
    <link rel="stylesheet" href="/assets/css/0.styles.78041c82.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-19557b78><div data-v-19557b78><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-19557b78 data-v-19557b78><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-64685f0e data-v-19557b78 data-v-19557b78><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>SeekingLight</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>å¯»å…‰</span>
          Â Â 
          <span data-v-64685f0e>2017 - </span>
          2022
        </a></span></div></div> <div class="hide" data-v-19557b78><header class="navbar" data-v-19557b78><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/icon.png" alt="SeekingLight" class="logo"> <span class="site-name">SeekingLight</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      åˆ†ç±»
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/æ‚è®°/" class="nav-link"><i class="iconfont undefined"></i>
  æ‚è®°
</a></li><li class="dropdown-item"><!----> <a href="/categories/å‰ç«¯/" class="nav-link"><i class="iconfont undefined"></i>
  å‰ç«¯
</a></li><li class="dropdown-item"><!----> <a href="/categories/è®¡ç®—æœºç»„æˆåŸç†/" class="nav-link"><i class="iconfont undefined"></i>
  è®¡ç®—æœºç»„æˆåŸç†
</a></li><li class="dropdown-item"><!----> <a href="/categories/Typescript/" class="nav-link"><i class="iconfont undefined"></i>
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/categories/åç«¯/" class="nav-link"><i class="iconfont undefined"></i>
  åç«¯
</a></li><li class="dropdown-item"><!----> <a href="/categories/è®¡ç®—æœºç½‘ç»œ/" class="nav-link"><i class="iconfont undefined"></i>
  è®¡ç®—æœºç½‘ç»œ
</a></li><li class="dropdown-item"><!----> <a href="/categories/ç®—æ³•/" class="nav-link"><i class="iconfont undefined"></i>
  ç®—æ³•
</a></li><li class="dropdown-item"><!----> <a href="/categories/æ“ä½œç³»ç»Ÿ/" class="nav-link"><i class="iconfont undefined"></i>
  æ“ä½œç³»ç»Ÿ
</a></li><li class="dropdown-item"><!----> <a href="/categories/è‰²å½©ç©ºé—´/" class="nav-link"><i class="iconfont undefined"></i>
  è‰²å½©ç©ºé—´
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  æ ‡ç­¾
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  æ—¶é—´è½´
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      å…³äº
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/SeekingLight233" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://space.bilibili.com/37019841?from=search&amp;seid=11160746842115235145" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-bilibili"></i>
  BiliBili
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://music.163.com/#/user/home?id=355059838" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-douyin"></i>
  ç½‘æ˜“äº‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/contact.html" class="nav-link"><i class="iconfont reco-wechat"></i>
  è”ç³»æˆ‘
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-19557b78></div> <aside class="sidebar" data-v-19557b78><div class="personal-info-wrapper" data-v-042e23d4><img src="/images/hero.png" alt="author-avatar" class="personal-img" data-v-042e23d4> <h3 class="name" data-v-042e23d4>
    å¯»å…‰
  </h3> <div class="num" data-v-042e23d4><div data-v-042e23d4><h3 data-v-042e23d4>46</h3> <h6 data-v-042e23d4>Article</h6></div> <div data-v-042e23d4><h3 data-v-042e23d4>83</h3> <h6 data-v-042e23d4>Tag</h6></div></div> <hr data-v-042e23d4></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      åˆ†ç±»
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/æ‚è®°/" class="nav-link"><i class="iconfont undefined"></i>
  æ‚è®°
</a></li><li class="dropdown-item"><!----> <a href="/categories/å‰ç«¯/" class="nav-link"><i class="iconfont undefined"></i>
  å‰ç«¯
</a></li><li class="dropdown-item"><!----> <a href="/categories/è®¡ç®—æœºç»„æˆåŸç†/" class="nav-link"><i class="iconfont undefined"></i>
  è®¡ç®—æœºç»„æˆåŸç†
</a></li><li class="dropdown-item"><!----> <a href="/categories/Typescript/" class="nav-link"><i class="iconfont undefined"></i>
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/categories/åç«¯/" class="nav-link"><i class="iconfont undefined"></i>
  åç«¯
</a></li><li class="dropdown-item"><!----> <a href="/categories/è®¡ç®—æœºç½‘ç»œ/" class="nav-link"><i class="iconfont undefined"></i>
  è®¡ç®—æœºç½‘ç»œ
</a></li><li class="dropdown-item"><!----> <a href="/categories/ç®—æ³•/" class="nav-link"><i class="iconfont undefined"></i>
  ç®—æ³•
</a></li><li class="dropdown-item"><!----> <a href="/categories/æ“ä½œç³»ç»Ÿ/" class="nav-link"><i class="iconfont undefined"></i>
  æ“ä½œç³»ç»Ÿ
</a></li><li class="dropdown-item"><!----> <a href="/categories/è‰²å½©ç©ºé—´/" class="nav-link"><i class="iconfont undefined"></i>
  è‰²å½©ç©ºé—´
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  æ ‡ç­¾
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  æ—¶é—´è½´
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      å…³äº
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/SeekingLight233" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://space.bilibili.com/37019841?from=search&amp;seid=11160746842115235145" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-bilibili"></i>
  BiliBili
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://music.163.com/#/user/home?id=355059838" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-douyin"></i>
  ç½‘æ˜“äº‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/contact.html" class="nav-link"><i class="iconfont reco-wechat"></i>
  è”ç³»æˆ‘
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>sqlè¯­å¥å­¦ä¹ ç¬”è®°(sql-server)</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/sql.html#æ•°æ®åº“åˆ›å»º" class="sidebar-link">æ•°æ®åº“åˆ›å»º</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/sql.html#æ•°æ®åº“ç®¡ç†" class="sidebar-link">æ•°æ®åº“ç®¡ç†</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/sql.html#æŸ¥çœ‹æ•°æ®åº“" class="sidebar-link">æŸ¥çœ‹æ•°æ®åº“</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#ä¿®æ”¹æ•°æ®åº“é…ç½®" class="sidebar-link">ä¿®æ”¹æ•°æ®åº“é…ç½®</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#æ‰©å¤§ä¸æ”¶ç¼©æ•°æ®åº“" class="sidebar-link">æ‰©å¤§ä¸æ”¶ç¼©æ•°æ®åº“</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#åˆ é™¤æ•°æ®åº“" class="sidebar-link">åˆ é™¤æ•°æ®åº“</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#åˆ†ç¦»å’Œé™„åŠ æ•°æ®åº“" class="sidebar-link">åˆ†ç¦»å’Œé™„åŠ æ•°æ®åº“</a></li></ul></li><li><a href="/docs/sql.html#è¡¨ç»“æ„çš„ç®¡ç†" class="sidebar-link">è¡¨ç»“æ„çš„ç®¡ç†</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/sql.html#åˆ›å»ºè¡¨ç»“æ„" class="sidebar-link">åˆ›å»ºè¡¨ç»“æ„</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#ä¿®æ”¹è¡¨ç»“æ„" class="sidebar-link">ä¿®æ”¹è¡¨ç»“æ„</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#åˆ é™¤è¡¨" class="sidebar-link">åˆ é™¤è¡¨</a></li></ul></li><li><a href="/docs/sql.html#è¡¨ç»“æ„çš„å®Œæ•´æ§åˆ¶" class="sidebar-link">è¡¨ç»“æ„çš„å®Œæ•´æ§åˆ¶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/sql.html#primary-keyçº¦æŸ" class="sidebar-link">primary keyçº¦æŸ</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#uniqueçº¦æŸ" class="sidebar-link">uniqueçº¦æŸ</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#checkçº¦æŸå’Œdefaultçº¦æŸ" class="sidebar-link">checkçº¦æŸå’Œdefaultçº¦æŸ</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#foreign-keyçº¦æŸ" class="sidebar-link">foreign keyçº¦æŸ</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#ç¦ç”¨çº¦æŸ" class="sidebar-link">ç¦ç”¨çº¦æŸ</a></li></ul></li><li><a href="/docs/sql.html#è¡¨å†…å®¹çš„ç®¡ç†" class="sidebar-link">è¡¨å†…å®¹çš„ç®¡ç†</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/sql.html#insert" class="sidebar-link">insert</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#update" class="sidebar-link">update</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#delete" class="sidebar-link">delete</a></li></ul></li><li><a href="/docs/sql.html#æ•°æ®åŸºæœ¬æŸ¥è¯¢" class="sidebar-link">æ•°æ®åŸºæœ¬æŸ¥è¯¢</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/sql.html#é€‰æ‹©å­—æ®µ" class="sidebar-link">é€‰æ‹©å­—æ®µ</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#é€‰æ‹©è¡Œ" class="sidebar-link">é€‰æ‹©è¡Œ</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#æ•°æ®æ’åºæŸ¥è¯¢" class="sidebar-link">æ•°æ®æ’åºæŸ¥è¯¢</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#ä½¿ç”¨è®¡ç®—å‡½æ•°" class="sidebar-link">ä½¿ç”¨è®¡ç®—å‡½æ•°</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#å¯¹æŸ¥è¯¢ç»“æœåˆ†ç»„è®¡ç®—" class="sidebar-link">å¯¹æŸ¥è¯¢ç»“æœåˆ†ç»„è®¡ç®—</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#intoè¯­å¥" class="sidebar-link">intoè¯­å¥</a></li></ul></li><li><a href="/docs/sql.html#å­æŸ¥è¯¢" class="sidebar-link">å­æŸ¥è¯¢</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/sql.html#å•å€¼åµŒå¥—æŸ¥è¯¢" class="sidebar-link">å•å€¼åµŒå¥—æŸ¥è¯¢</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#å¤šå€¼åµŒå¥—æŸ¥è¯¢" class="sidebar-link">å¤šå€¼åµŒå¥—æŸ¥è¯¢</a></li></ul></li><li><a href="/docs/sql.html#è¿æ¥æŸ¥è¯¢" class="sidebar-link">è¿æ¥æŸ¥è¯¢</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/sql.html#è‡ªè¿æ¥" class="sidebar-link">è‡ªè¿æ¥</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#å†…éƒ¨è¿æ¥" class="sidebar-link">å†…éƒ¨è¿æ¥</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#å¤–éƒ¨è¿æ¥" class="sidebar-link">å¤–éƒ¨è¿æ¥</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#äº¤å‰è¿æ¥" class="sidebar-link">äº¤å‰è¿æ¥</a></li></ul></li><li><a href="/docs/sql.html#é›†åˆè¿ç®—æŸ¥è¯¢" class="sidebar-link">é›†åˆè¿ç®—æŸ¥è¯¢</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/sql.html#å¹¶è¿ç®—" class="sidebar-link">å¹¶è¿ç®—</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#äº¤è¿ç®—" class="sidebar-link">äº¤è¿ç®—</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#å·®è¿ç®—" class="sidebar-link">å·®è¿ç®—</a></li></ul></li><li><a href="/docs/sql.html#caseå‡½æ•°æŸ¥è¯¢" class="sidebar-link">caseå‡½æ•°æŸ¥è¯¢</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/sql.html#ç®€å•caseå‡½æ•°" class="sidebar-link">ç®€å•caseå‡½æ•°</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#æœç´¢caseå‡½æ•°" class="sidebar-link">æœç´¢caseå‡½æ•°</a></li></ul></li><li><a href="/docs/sql.html#ç´¢å¼•" class="sidebar-link">ç´¢å¼•</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/sql.html#åˆ›å»ºç´¢å¼•" class="sidebar-link">åˆ›å»ºç´¢å¼•</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#ç®¡ç†ç´¢å¼•" class="sidebar-link">ç®¡ç†ç´¢å¼•</a></li></ul></li><li><a href="/docs/sql.html#è§†å›¾" class="sidebar-link">è§†å›¾</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/sql.html#åˆ›å»ºè§†å›¾" class="sidebar-link">åˆ›å»ºè§†å›¾</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#é€šè¿‡è§†å›¾æŸ¥è¯¢æ•°æ®" class="sidebar-link">é€šè¿‡è§†å›¾æŸ¥è¯¢æ•°æ®</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#é€šè¿‡è§†å›¾ä¿®æ”¹æ•°æ®" class="sidebar-link">é€šè¿‡è§†å›¾ä¿®æ”¹æ•°æ®</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#æŸ¥çœ‹å’Œé‡å‘½åè§†å›¾" class="sidebar-link">æŸ¥çœ‹å’Œé‡å‘½åè§†å›¾</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#ä¿®æ”¹å’Œåˆ é™¤è§†å›¾" class="sidebar-link">ä¿®æ”¹å’Œåˆ é™¤è§†å›¾</a></li></ul></li><li><a href="/docs/sql.html#å‡½æ•°" class="sidebar-link">å‡½æ•°</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/sql.html#åˆ›å»ºå’Œè°ƒç”¨å‡½æ•°" class="sidebar-link">åˆ›å»ºå’Œè°ƒç”¨å‡½æ•°</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#ç®¡ç†ç”¨æˆ·å®šä¹‰å‡½æ•°" class="sidebar-link">ç®¡ç†ç”¨æˆ·å®šä¹‰å‡½æ•°</a></li></ul></li><li><a href="/docs/sql.html#æ¸¸æ ‡" class="sidebar-link">æ¸¸æ ‡</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/sql.html#å£°æ˜æ¸¸æ ‡" class="sidebar-link">å£°æ˜æ¸¸æ ‡</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#æ‰“å¼€æ¸¸æ ‡" class="sidebar-link">æ‰“å¼€æ¸¸æ ‡</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#è¯»å–æ¸¸æ ‡æ•°æ®" class="sidebar-link">è¯»å–æ¸¸æ ‡æ•°æ®</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#ç”¨æ¸¸æ ‡ä¿®æ”¹å’Œåˆ é™¤æ•°æ®" class="sidebar-link">ç”¨æ¸¸æ ‡ä¿®æ”¹å’Œåˆ é™¤æ•°æ®</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#å…³é—­å’Œåˆ é™¤æ¸¸æ ‡" class="sidebar-link">å…³é—­å’Œåˆ é™¤æ¸¸æ ‡</a></li></ul></li><li><a href="/docs/sql.html#äº‹åŠ¡" class="sidebar-link">äº‹åŠ¡</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/sql.html#å­˜å‚¨è¿‡ç¨‹" class="sidebar-link">å­˜å‚¨è¿‡ç¨‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/sql.html#å­˜å‚¨è¿‡ç¨‹åˆ›å»º" class="sidebar-link">å­˜å‚¨è¿‡ç¨‹åˆ›å»º</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#å­˜å‚¨è¿‡ç¨‹æ‰§è¡Œ" class="sidebar-link">å­˜å‚¨è¿‡ç¨‹æ‰§è¡Œ</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#åˆ é™¤å­˜å‚¨è¿‡ç¨‹" class="sidebar-link">åˆ é™¤å­˜å‚¨è¿‡ç¨‹</a></li></ul></li><li><a href="/docs/sql.html#è§¦å‘å™¨" class="sidebar-link">è§¦å‘å™¨</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/sql.html#dmlè§¦å‘å™¨" class="sidebar-link">DMLè§¦å‘å™¨</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#ddlè§¦å‘å™¨" class="sidebar-link">DDLè§¦å‘å™¨</a></li><li class="sidebar-sub-header"><a href="/docs/sql.html#ç®¡ç†è§¦å‘å™¨" class="sidebar-link">ç®¡ç†è§¦å‘å™¨</a></li></ul></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-64685f0e data-v-19557b78><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>sqlè¯­å¥å­¦ä¹ ç¬”è®°(sql-server)</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>å¯»å…‰</span>
          Â Â 
          <span data-v-64685f0e>2017 - </span>
          2022
        </a></span></div></div> <div data-v-19557b78><main class="page"><div class="page-title" style="display:none;"><h1>sqlè¯­å¥å­¦ä¹ ç¬”è®°(sql-server)</h1> <hr> <div data-v-34ea29db><i class="iconfont reco-account" data-v-34ea29db><span data-v-34ea29db>å¯»å…‰</span></i> <i class="iconfont reco-date" data-v-34ea29db><span data-v-34ea29db>2019-12-24</span></i> <!----> <i class="iconfont reco-tag tags" data-v-34ea29db><span class="tag-item" data-v-34ea29db>å¸¸ç”¨sqlè¯­å¥</span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><p>å‰å‡ å¤©çš„MongoDBè¢«ç›—çœŸçš„æ˜¯æŠŠæœ¬è’Ÿè’»éš¾å—åäº†ï¼Œå¦‚æœè‡ªå·±å½“åˆä¼šsqlè¿˜ç”¨å•¥MongoDBå•Š ğŸ˜­ğŸ˜­</p> <p>ç®€å•çš„æŠŠå¸¸ç”¨çš„sqlè¯­å¥æ•´ç†æ€»ç»“ä¸‹ï¼Œä¸»è¦è¿˜æ˜¯ä¸ºäº†æ–¹ä¾¿è‡ªå·±ä»¥åæ“ä½œsqlç±»æ•°æ®åº“<s>ä»¥åŠå’Œåº”ä»˜æœŸæœ«è€ƒè¯•</s>ã€‚</p> <p>æœ¬ç¬”è®°ä¸­çš„sqlè¯­å¥æµ‹è¯•ç¯å¢ƒä¸ºsql-server 2008 R2ã€‚</p> <p>å†…å®¹æ€»ç»“ç›¸å¯¹å…¥é—¨å’ŒåŸºç¡€ï¼Œå…·ä½“è¯­å¥çš„è¯¦ç»†ä½¿ç”¨è¿˜è¯·æ‚¨æŸ¥é˜…å„æ•°æ®åº“å®˜æ–¹æ–‡æ¡£ã€‚</p> <p><a href="https://docs.microsoft.com/zh-cn/sql/t-sql/statements/statements?view=sql-server-ver15" target="_blank" rel="noopener noreferrer">Transact-SQL è¯­å¥<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://www.mysqlzh.com/doc/124.html" target="_blank" rel="noopener noreferrer">SQLè¯­å¥è¯­æ³•<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="æ•°æ®åº“åˆ›å»º"><a href="#æ•°æ®åº“åˆ›å»º" class="header-anchor">#</a> æ•°æ®åº“åˆ›å»º</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">database</span> æ•°æ®åº“å
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="æ•°æ®åº“ç®¡ç†"><a href="#æ•°æ®åº“ç®¡ç†" class="header-anchor">#</a> æ•°æ®åº“ç®¡ç†</h2> <h3 id="æŸ¥çœ‹æ•°æ®åº“"><a href="#æŸ¥çœ‹æ•°æ®åº“" class="header-anchor">#</a> æŸ¥çœ‹æ•°æ®åº“</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">use</span> æ•°æ®åº“å
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="ä¿®æ”¹æ•°æ®åº“é…ç½®"><a href="#ä¿®æ”¹æ•°æ®åº“é…ç½®" class="header-anchor">#</a> ä¿®æ”¹æ•°æ®åº“é…ç½®</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">database</span> æ•°æ®åº“å

åç»­<span class="token keyword">sql</span>æ“ä½œè¯­å¥
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="æ‰©å¤§ä¸æ”¶ç¼©æ•°æ®åº“"><a href="#æ‰©å¤§ä¸æ”¶ç¼©æ•°æ®åº“" class="header-anchor">#</a> æ‰©å¤§ä¸æ”¶ç¼©æ•°æ®åº“</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">--æ‰©å¤§æ•°æ®åº“</span>
<span class="token keyword">alter</span> <span class="token keyword">database</span> æ•°æ®åº“å
<span class="token keyword">modify</span> <span class="token keyword">file</span><span class="token punctuation">(</span>
    name <span class="token operator">=</span> æ•°æ®åº“ä¸­çš„ä¸»è¦æ•°æ®æ–‡ä»¶åï¼Œ
    size <span class="token operator">=</span> ä¿®æ”¹åçš„æ–‡ä»¶å¤§å°
<span class="token punctuation">)</span>
<span class="token comment">--æ”¶ç¼©æ•´ä¸ªæ•°æ®åº“,ä½¿schoolæ•°æ®åº“ä¸­çš„æ‰€æœ‰æ–‡ä»¶éƒ½æœ‰20%çš„å¯ç”¨ç©ºé—´</span>
<span class="token keyword">dbcc</span> shrinkdatabase<span class="token punctuation">(</span>school<span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--æ”¶ç¼©æŒ‡å®šæ•°æ®æ–‡ä»¶ï¼Œä½¿schoolæ•°æ®åº“ä¸­çš„classæ–‡ä»¶æ”¶ç¼©åˆ°4 MB</span>
<span class="token keyword">dbcc</span> shrinkfile<span class="token punctuation">(</span>class<span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="åˆ é™¤æ•°æ®åº“"><a href="#åˆ é™¤æ•°æ®åº“" class="header-anchor">#</a> åˆ é™¤æ•°æ®åº“</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">database</span> æ•°æ®åº“å
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="åˆ†ç¦»å’Œé™„åŠ æ•°æ®åº“"><a href="#åˆ†ç¦»å’Œé™„åŠ æ•°æ®åº“" class="header-anchor">#</a> åˆ†ç¦»å’Œé™„åŠ æ•°æ®åº“</h3> <h4 id="åˆ†ç¦»"><a href="#åˆ†ç¦»" class="header-anchor">#</a> åˆ†ç¦»</h4> <blockquote><p>åˆ†ç¦»æ•°æ®åº“æ˜¯æŒ‡å°†æ•°æ®åº“ä»sql serverçš„å®ä¾‹ä¸­åˆ é™¤ï¼Œä½†æ–‡ä»¶ä¾ç„¶å­˜åœ¨ï¼Œæ˜¯å¯ä»¥æ‰¾å›æ¥çš„ã€‚</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">exec</span> sp_detach_db <span class="token string">'æ•°æ®åº“å'</span><span class="token punctuation">,</span><span class="token string">'true'</span><span class="token punctuation">;</span>

<span class="token comment">--å½“åé¢è¿½åŠ å‚æ•°trueä»£è¡¨åˆ†ç¦»åè·³è¿‡æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="é™„åŠ "><a href="#é™„åŠ " class="header-anchor">#</a> é™„åŠ </h4> <blockquote><p>å°†åˆ†ç¦»ä¸‹æ¥çš„æ•°æ®åº“é‡æ–°é™„åŠ åˆ°sql serverä¸Š</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">--å°†schoolæ•°æ®åº“é™„åŠ åˆ°schoolæ•°æ®åº“å®ä¾‹ä¸Šå»</span>
<span class="token keyword">create</span> <span class="token keyword">database</span> school
<span class="token keyword">on</span><span class="token punctuation">(</span>filename <span class="token operator">=</span> <span class="token string">'æ•°æ®æ–‡ä»¶è·¯å¾„'</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> attach
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="è¡¨ç»“æ„çš„ç®¡ç†"><a href="#è¡¨ç»“æ„çš„ç®¡ç†" class="header-anchor">#</a> è¡¨ç»“æ„çš„ç®¡ç†</h2> <h3 id="åˆ›å»ºè¡¨ç»“æ„"><a href="#åˆ›å»ºè¡¨ç»“æ„" class="header-anchor">#</a> åˆ›å»ºè¡¨ç»“æ„</h3> <h4 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="header-anchor">#</a> åŸºæœ¬è¯­æ³•</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> è¡¨åç§°<span class="token punctuation">(</span>
    å­—æ®µå<span class="token number">1</span> æ•°æ®ç±»å‹ çº¦æŸ<span class="token punctuation">,</span>
    å­—æ®µå<span class="token number">2</span> æ•°æ®ç±»å‹ çº¦æŸ<span class="token punctuation">,</span>
    å­—æ®µå<span class="token number">3</span> æ•°æ®ç±»å‹ çº¦æŸ<span class="token punctuation">,</span>
    è¿½åŠ çº¦æŸ<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="ä¿®æ”¹è¡¨ç»“æ„"><a href="#ä¿®æ”¹è¡¨ç»“æ„" class="header-anchor">#</a> ä¿®æ”¹è¡¨ç»“æ„</h3> <h4 id="æ·»åŠ "><a href="#æ·»åŠ " class="header-anchor">#</a> æ·»åŠ </h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- å‘studentè¡¨ä¸­æ·»åŠ ä½å€å’Œé‚®æ”¿ç¼–ç å­—æ®µã€‚</span>
<span class="token keyword">use</span> school
go
<span class="token keyword">alter</span> <span class="token keyword">table</span> student <span class="token keyword">add</span>
address <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
code <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="ä¿®æ”¹"><a href="#ä¿®æ”¹" class="header-anchor">#</a> ä¿®æ”¹</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- å°†studentè¡¨ä¸­çš„sdeptå­—æ®µæ”¹ä¸ºvarcharç±»å‹ï¼Œé•¿åº¦ä¸º30ï¼Œå¹¶è®¾ç½®è¯¥å­—æ®µä¸èƒ½ä¸ºç©º</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> student <span class="token keyword">alter</span> <span class="token keyword">column</span> sdept <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">not</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="åˆ é™¤"><a href="#åˆ é™¤" class="header-anchor">#</a> åˆ é™¤</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- å°†studentè¡¨ä¸­çš„addresså­—æ®µåˆ é™¤</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> student <span class="token keyword">drop</span> <span class="token keyword">column</span> address
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="é‡å‘½å"><a href="#é‡å‘½å" class="header-anchor">#</a> é‡å‘½å</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- å°†studentè¡¨ä¸­zipcodeå­—æ®µæ›´åä¸ºzip</span>
<span class="token keyword">exec</span> sp_rename <span class="token string">'student.zipcode'</span><span class="token punctuation">,</span><span class="token string">'zip'</span><span class="token punctuation">,</span><span class="token string">'column'</span><span class="token punctuation">;</span>

<span class="token comment">-- å°†è¡¨scé‡å‘½åä¸º'score'</span>
<span class="token keyword">exec</span> sp_rename <span class="token string">'sc'</span><span class="token punctuation">,</span><span class="token string">'score'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="åˆ é™¤è¡¨"><a href="#åˆ é™¤è¡¨" class="header-anchor">#</a> åˆ é™¤è¡¨</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- åˆ é™¤æ•°æ®åº“ä¸­çš„scè¡¨</span>
<span class="token keyword">use</span> school
go
<span class="token keyword">drop</span> sc
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="è¡¨ç»“æ„çš„å®Œæ•´æ§åˆ¶"><a href="#è¡¨ç»“æ„çš„å®Œæ•´æ§åˆ¶" class="header-anchor">#</a> è¡¨ç»“æ„çš„å®Œæ•´æ§åˆ¶</h2> <h3 id="primary-keyçº¦æŸ"><a href="#primary-keyçº¦æŸ" class="header-anchor">#</a> primary keyçº¦æŸ</h3> <blockquote><p>ç”¨æ¥å”¯ä¸€æ ‡è¯†å½“å‰æ•°æ®è¡¨ä¸­çš„æŸä¸€è¡Œ</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- å°†courseè¡¨ä¸­çš„cnoå­—æ®µè®¾ç½®ä¸ºä¸»é”®</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> course <span class="token keyword">add</span> <span class="token keyword">constraint</span> pk_cno <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>cno<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- åˆ é™¤ä¸Šé¢è®¾ç½®çš„ä¸»é”®çº¦æŸ</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> course <span class="token keyword">drop</span> <span class="token keyword">constraint</span> pk_cno<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="uniqueçº¦æŸ"><a href="#uniqueçº¦æŸ" class="header-anchor">#</a> uniqueçº¦æŸ</h3> <blockquote><p>ç”¨æ¥ä¿è¯å­—æ®µä¸­çš„æ‰€æœ‰æ•°æ®å„ä¸ç›¸åŒ</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- åˆ›å»ºdepartmentè¡¨æ—¶ä¸ºidè¿™ä¸ªå­—æ®µè®¾ç½®uniqeçº¦æŸ</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> department<span class="token punctuation">(</span>
    id <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">constraint</span> u_id uniqe<span class="token punctuation">,</span>
    dname <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
<span class="token comment">-- ä¸ºä¸Šè¡¨ä¸­çš„nameå­—æ®µè®¾ç½®uniqueçº¦æŸ</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> department
<span class="token keyword">add</span> <span class="token keyword">constraint</span> u_name uniqe<span class="token punctuation">(</span>dname<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="checkçº¦æŸå’Œdefaultçº¦æŸ"><a href="#checkçº¦æŸå’Œdefaultçº¦æŸ" class="header-anchor">#</a> checkçº¦æŸå’Œdefaultçº¦æŸ</h3> <blockquote><p>checkçº¦æŸç”¨æ¥ä¿è¯åˆ—ä¸­çš„æ‰€æœ‰å€¼å¿…é¡»è¦æ»¡è¶³çš„æ¡ä»¶
defaultçº¦æŸç”¨æ¥ä¿è¯åˆ—ä¸­æ•°æ®æœªæŒ‡å®šæ—¶çš„ç¼ºçœå€¼</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- åˆ›å»ºstudentè¡¨æ—¶ä¸ºsexå­—æ®µæ·»åŠ checkçº¦æŸå¹¶é»˜è®¤è®¾ç½®å­—æ®µå€¼ä¸ºâ€˜ç”·â€™</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> student<span class="token punctuation">(</span>
    sex <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">check</span><span class="token punctuation">(</span>sex <span class="token operator">=</span> <span class="token string">'ç”·'</span> <span class="token operator">or</span> sex <span class="token operator">=</span> <span class="token string">'å¥³'</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">'ç”·'</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="foreign-keyçº¦æŸ"><a href="#foreign-keyçº¦æŸ" class="header-anchor">#</a> foreign keyçº¦æŸ</h3> <blockquote><p>ç”¨æ¥å”¯ä¸€æ ‡è¯†å…¶ä»–æ•°æ®è¡¨ä¸­çš„æŸä¸€è¡Œ</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- åˆ›å»ºscorelè¡¨ï¼ŒåŒ…å«snoï¼Œcnoï¼Œå’Œgradeå­—æ®µï¼Œåœ¨snoå’Œcnoä¸Šè®¾ç½®ä¸»é”®ï¼ŒåŒæ—¶è®¾ç½®snoå­—æ®µä¸ºstudentè¡¨ä¸­snoå­—æ®µçš„å¤–é”®</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> scorel<span class="token punctuation">(</span>
    sno <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    cno <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>snp<span class="token punctuation">,</span>cno<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>sno<span class="token punctuation">)</span> <span class="token keyword">references</span> student<span class="token punctuation">(</span>sno<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- æ‰‹åŠ¨ä¸ºä¸Šé¢è¡¨ä¸­çš„cnoå­—æ®µè®¾ç½®ä¸ºcourseè¡¨ä¸­cnoå­—æ®µçš„å¤–é”®</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> scorel <span class="token keyword">add</span> <span class="token keyword">constraint</span> fk_cno <span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>cno<span class="token punctuation">)</span> <span class="token keyword">references</span> course<span class="token punctuation">(</span>cno<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="ç¦ç”¨çº¦æŸ"><a href="#ç¦ç”¨çº¦æŸ" class="header-anchor">#</a> ç¦ç”¨çº¦æŸ</h3> <blockquote><p>æŸäº›ç‰¹æ®Šæƒ…å†µæˆ‘ä»¬å¯èƒ½ä¼šé€‰æ‹©å…ˆç¦ç”¨æ‰çº¦æŸï¼Œè€Œä¸æ˜¯åˆ é™¤çº¦æŸã€‚</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- æš‚æ—¶ç¦æ­¢studentè¡¨ä¸­è®¾ç½®çš„æ€§åˆ«çº¦æŸ</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> student
<span class="token keyword">with</span> nocheck
<span class="token keyword">add</span> <span class="token keyword">constraint</span> ck_sex <span class="token keyword">check</span><span class="token punctuation">(</span>sex <span class="token operator">=</span> <span class="token string">'ç”·'</span> <span class="token operator">or</span> sex <span class="token operator">=</span> <span class="token string">'å¥³'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- å¯ç”¨studentè¡¨ä¸­çš„æ€§åˆ«çº¦æŸ</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> student <span class="token keyword">check</span> <span class="token keyword">constraint</span> ck_sex<span class="token punctuation">;</span>

<span class="token comment">-- ç¦ç”¨scorelè¡¨ä¸­æ‰€æœ‰çš„çº¦æŸ</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> scorel
nocheck <span class="token keyword">constraint</span> <span class="token keyword">all</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="è¡¨å†…å®¹çš„ç®¡ç†"><a href="#è¡¨å†…å®¹çš„ç®¡ç†" class="header-anchor">#</a> è¡¨å†…å®¹çš„ç®¡ç†</h2> <h3 id="insert"><a href="#insert" class="header-anchor">#</a> insert</h3> <blockquote><p>insert intoè¯­å¥ç”¨äºæˆ‘ä»¬å‘è¡¨ä¸­æ·»åŠ æ–°çš„è¡Œ</p></blockquote> <h4 id="ä¸æŒ‡å®šå­—æ®µåç§°æ ¹æ®å­—æ®µé¡ºåºæ’å…¥å…¨éƒ¨å­—æ®µå€¼"><a href="#ä¸æŒ‡å®šå­—æ®µåç§°æ ¹æ®å­—æ®µé¡ºåºæ’å…¥å…¨éƒ¨å­—æ®µå€¼" class="header-anchor">#</a> ä¸æŒ‡å®šå­—æ®µåç§°æ ¹æ®å­—æ®µé¡ºåºæ’å…¥å…¨éƒ¨å­—æ®µå€¼</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- å‡è®¾studentè¡¨ä¸­åªæœ‰idï¼Œnameï¼Œsexè¿™ä¸‰ä¸ªå­—æ®µ,å¹¶ä¸”æ€§åˆ«å­—æ®µå¯ä»¥ä¸ºç©º</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'0001'</span><span class="token punctuation">,</span><span class="token string">'å´äº¦å‡¡'</span><span class="token punctuation">,</span><span class="token string">'ç”·'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'0002'</span><span class="token punctuation">,</span><span class="token string">'è”¡å¾å¤'</span><span class="token punctuation">,</span><span class="token string">'ç”·'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="æŒ‡å®šå­—æ®µåç§°æ’å…¥éƒ¨åˆ†å­—æ®µå€¼"><a href="#æŒ‡å®šå­—æ®µåç§°æ’å…¥éƒ¨åˆ†å­—æ®µå€¼" class="header-anchor">#</a> æŒ‡å®šå­—æ®µåç§°æ’å…¥éƒ¨åˆ†å­—æ®µå€¼</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- åœ¨studentè¡¨ä¸­æ·»åŠ æ–°çš„äººç‰©</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> student<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'0003'</span><span class="token punctuation">,</span><span class="token string">'äº”äº”å¼€'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- æ­¤æ—¶äº”äº”å¼€å°±è¢«æ·»åŠ è¿›äº†å­¦ç”Ÿè¡¨ï¼ŒåŒæ—¶æ€§åˆ«æ ä¸ºç©º</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="update"><a href="#update" class="header-anchor">#</a> update</h3> <blockquote><p>updateè¯­å¥ç”¨äºä¿®æ”¹è¡¨ä¸­çš„å­—æ®µå€¼</p></blockquote> <div class="language- extra-class"><pre><code>| ID | NAME     | AGE | ADDRESS   |
+----+----------+-----+-----------+
|  1 | mike     |  19 | beijing   |
|  2 | katy     |  25 | hangzhou  |
|  3 | jason    |  20 | shenyang  |
|  4 | mimgming |  18 | shanghai  |
|  5 | hongh    |  21 | zhengzhou |
|  6 | hanghang |  22 | tianjin   |
|  7 | peter    |  22 | guangzhou |
+----+----------+-----+-----------+
</code></pre></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- å°†ä¸Šè¿°peopleè¡¨ä¸­çš„å¹´é¾„éƒ½æ”¹ä¸º20å²</span>
<span class="token keyword">update</span> people <span class="token keyword">set</span> age <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>

<span class="token operator">&lt;&lt;</span><span class="token operator">&lt;&lt;</span><span class="token operator">&lt;&lt;</span><span class="token operator">&lt;</span> HEAD
<span class="token comment">-- åŸºäºæ¡ä»¶çš„æ›´æ–°ï¼Œå°†idä¸º2çš„æ¡ç›®åœ°å€æ”¹ä¸ºzhejaing</span>
<span class="token keyword">update</span> people <span class="token keyword">set</span> address <span class="token operator">=</span> zhejiang <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span>
<span class="token operator">&lt;&lt;</span><span class="token operator">&lt;&lt;</span><span class="token operator">&lt;&lt;</span><span class="token operator">&lt;</span> HEAD
<span class="token comment">-- åŸºäºæ¡ä»¶çš„æ›´æ–°ï¼Œå°†idä¸º2çš„æ¡ç›®åœ°å€æ”¹ä¸ºzhejiang,ageæ”¹ä¸º18</span>
<span class="token keyword">update</span> people <span class="token keyword">set</span> address <span class="token operator">=</span> zhejiang<span class="token punctuation">,</span>age <span class="token operator">=</span> <span class="token number">18</span> <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> 
<span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span>
<span class="token comment">-- åŸºäºæ¡ä»¶çš„æ›´æ–°ï¼Œå°†idä¸º2çš„æ¡ç›®åœ°å€æ”¹ä¸ºzhejaing</span>
<span class="token keyword">update</span> people <span class="token keyword">set</span> address <span class="token operator">=</span> zhejiang <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> a6d99de767cc1db3754c54c25d6b940084f50a9b
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> ac6ab2c78f3bb499c9c143bcf1d0fbf7a3eca667
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="delete"><a href="#delete" class="header-anchor">#</a> delete</h3> <blockquote><p>deleteè¯­å¥ç”¨äºåˆ é™¤è¡¨ä¸­çš„ä¸€è¡Œæˆ–è€…å¤šè¡Œæ•°æ®</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- åˆ é™¤stuè¡¨ä¸­çš„æ‰€æœ‰è¡Œ(æ‰€æœ‰å†…å®¹)</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> stu

<span class="token comment">-- åˆ é™¤stuè¡¨ä¸­æ²¡æœ‰åœ°å€çš„è¡Œ</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> stu <span class="token keyword">where</span> address <span class="token operator">is</span> <span class="token boolean">null</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="æ•°æ®åŸºæœ¬æŸ¥è¯¢"><a href="#æ•°æ®åŸºæœ¬æŸ¥è¯¢" class="header-anchor">#</a> æ•°æ®åŸºæœ¬æŸ¥è¯¢</h2> <h3 id="é€‰æ‹©å­—æ®µ"><a href="#é€‰æ‹©å­—æ®µ" class="header-anchor">#</a> é€‰æ‹©å­—æ®µ</h3> <h4 id="é€‰æ‹©æŒ‡å®šå­—æ®µ"><a href="#é€‰æ‹©æŒ‡å®šå­—æ®µ" class="header-anchor">#</a> é€‰æ‹©æŒ‡å®šå­—æ®µ</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- æŸ¥è¯¢stuè¡¨ä¸­çš„å­¦ç”Ÿå§“åä¸æ€§åˆ«</span>
<span class="token keyword">select</span> name<span class="token punctuation">,</span>sex <span class="token keyword">from</span> stu
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="é€‰æ‹©å…¨éƒ¨å­—æ®µ"><a href="#é€‰æ‹©å…¨éƒ¨å­—æ®µ" class="header-anchor">#</a> é€‰æ‹©å…¨éƒ¨å­—æ®µ</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- æŸ¥è¯¢stuè¡¨ä¸­çš„æ‰€æœ‰å­—æ®µçš„è¯¦ç»†ä¿¡æ¯</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="æŸ¥è¯¢ç»“æœé¢„å¤„ç†"><a href="#æŸ¥è¯¢ç»“æœé¢„å¤„ç†" class="header-anchor">#</a> æŸ¥è¯¢ç»“æœé¢„å¤„ç†</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- æŸ¥è¯¢å­¦ç”Ÿå§“ååŠå…¶å¯¹åº”çš„å‡ºç”Ÿå¹´ä»½(å‡è®¾è¡¨ä¸­æ²¡æœ‰å‡ºç”Ÿå¹´ä»½å­—æ®µï¼Œåªæœ‰ageå­—æ®µ)</span>
<span class="token keyword">select</span> name<span class="token punctuation">,</span><span class="token number">2019</span><span class="token operator">-</span>age <span class="token keyword">from</span> stu
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>æ­¤æ—¶æŸ¥è¯¢ç»“æœä¼šæ˜¾ç¤ºæ— åˆ—å</p></blockquote> <div class="language- extra-class"><pre><code>| ID | NAME     |æ— åˆ—å|
+----+----------+-----+
|  1 | mike     |  19 |
|  2 | katy     |  25 |
|  3 | jason    |  20 |
|  4 | mimgming |  18 |
|  5 | hongh    |  21 |
|  6 | hanghang |  22 |
|  7 | peter    |  22 |
+----+----------+-----+
</code></pre></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- æŸ¥è¯¢å§“åä¸å‡ºç”Ÿå¹´ä»½ï¼Œå¹¶åœ¨å‡ºç”Ÿå¹´ä»½å‰åŠ å…¥å¸¸é‡åˆ—â€œå‡ºç”Ÿå¹´ä»½â€</span>
<span class="token keyword">select</span> name<span class="token punctuation">,</span><span class="token string">'å‡ºç”Ÿå¹´ä»½'</span><span class="token punctuation">,</span><span class="token number">2019</span><span class="token operator">-</span>age <span class="token keyword">from</span> stu
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>æŸ¥è¯¢ç»“æœ</p></blockquote> <div class="language- extra-class"><pre><code>| ID | NAME     |æ— åˆ—å   |æ— åˆ—å|

|  1 | mike     |å‡ºç”Ÿå¹´ä»½ |  19 |
|  2 | katy     |å‡ºç”Ÿå¹´ä»½ |  25 |
|  3 | jason    |å‡ºç”Ÿå¹´ä»½ |  20 |
|  4 | mimgming |å‡ºç”Ÿå¹´ä»½ |  18 |
|  5 | hongh    |å‡ºç”Ÿå¹´ä»½ |  21 |
|  6 | hanghang |å‡ºç”Ÿå¹´ä»½ |  22 |
|  7 | peter    |å‡ºç”Ÿå¹´ä»½ |  22 |
</code></pre></div><h4 id="æŸ¥è¯¢ç»“æœæŒ‡å®šè‡ªå®šä¹‰å­—æ®µåç§°"><a href="#æŸ¥è¯¢ç»“æœæŒ‡å®šè‡ªå®šä¹‰å­—æ®µåç§°" class="header-anchor">#</a> æŸ¥è¯¢ç»“æœæŒ‡å®šè‡ªå®šä¹‰å­—æ®µåç§°</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- æŸ¥è¯¢stuè¡¨ä¸­çš„çš„nameå’Œageï¼Œå¹¶æŒ‡å®šå„åˆ—çš„å­—æ®µåç§°åˆ†åˆ«ä¸ºå§“åå’Œå¹´é¾„</span>
<span class="token keyword">select</span> name <span class="token keyword">as</span> å§“å<span class="token punctuation">,</span>age <span class="token keyword">as</span> å¹´é¾„
<span class="token keyword">from</span> student
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>æŸ¥è¯¢ç»“æœ</p></blockquote> <div class="language- extra-class"><pre><code>| ID | å§“å      | å¹´é¾„ |
+----+----------+-----+
|  1 | mike     |  19 |
|  2 | katy     |  25 |
|  3 | jason    |  20 |
|  4 | mimgming |  18 |
|  5 | hongh    |  21 |
|  6 | hanghang |  22 |
|  7 | peter    |  22 |
+----+----------+-----+
</code></pre></div><h3 id="é€‰æ‹©è¡Œ"><a href="#é€‰æ‹©è¡Œ" class="header-anchor">#</a> é€‰æ‹©è¡Œ</h3> <h4 id="é™åˆ¶ç»“æœé›†"><a href="#é™åˆ¶ç»“æœé›†" class="header-anchor">#</a> é™åˆ¶ç»“æœé›†</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- æŸ¥è¯¢stuè¡¨ä¸­çš„å‰5è¡Œ</span>
<span class="token keyword">select</span> <span class="token keyword">top</span> <span class="token number">5</span> <span class="token keyword">from</span> stu
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="æ¶ˆé™¤å–å€¼é‡å¤çš„è¡Œ"><a href="#æ¶ˆé™¤å–å€¼é‡å¤çš„è¡Œ" class="header-anchor">#</a> æ¶ˆé™¤å–å€¼é‡å¤çš„è¡Œ</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token keyword">distinct</span> sex <span class="token keyword">from</span> stu
<span class="token comment">-- æ­¤æ—¶åœ¨æŸ¥è¯¢ç»“æœä¸­åªä¼šæ˜¾ç¤ºå‡º&quot;ç”·&quot;å’Œâ€œå¥³â€è¿™ä¸¤è¡Œã€‚</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="whereæ¡ä»¶æŸ¥è¯¢"><a href="#whereæ¡ä»¶æŸ¥è¯¢" class="header-anchor">#</a> whereæ¡ä»¶æŸ¥è¯¢</h4> <blockquote><p>whereè¯­å¥ä¸ä»…ä»…èƒ½ç”¨äºselectè¯­å¥ï¼Œè¿˜èƒ½ä¸ä¸Šé¢çš„updateï¼Œdeleteè¯­å¥ç›¸ç»“åˆä½¿ç”¨ã€‚</p></blockquote> <h5 id="ç­‰å€¼æŸ¥è¯¢ä¸æ¯”è¾ƒå¤§å°"><a href="#ç­‰å€¼æŸ¥è¯¢ä¸æ¯”è¾ƒå¤§å°" class="header-anchor">#</a> ç­‰å€¼æŸ¥è¯¢ä¸æ¯”è¾ƒå¤§å°</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- æŸ¥è¯¢jasonæ‰€åœ¨è¡Œçš„å…¨éƒ¨ä¿¡æ¯</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">'jason'</span>

<span class="token comment">-- æŸ¥è¯¢å¹´é¾„åœ¨20å²ä»¥ä¸‹çš„äººçš„å…¨éƒ¨ä¿¡æ¯</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu <span class="token keyword">where</span> age <span class="token operator">&lt;</span> <span class="token number">20</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="æ ¹æ®è¿ç»­èŒƒå›´æŸ¥è¯¢"><a href="#æ ¹æ®è¿ç»­èŒƒå›´æŸ¥è¯¢" class="header-anchor">#</a> æ ¹æ®è¿ç»­èŒƒå›´æŸ¥è¯¢</h5> <blockquote><p>between...andè¯­å¥å’Œnot between...andè¯­å¥å¯ä»¥ç”¨æ¥æŸ¥æ‰¾æ»¡è¶³æŒ‡å®šèŒƒå›´çš„è¡Œæˆ–è€…è¡Œä¸­çš„éƒ¨åˆ†å­—æ®µã€‚</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- æŸ¥è¯¢å¹´é¾„åœ¨20-23å²çš„å­¦ç”Ÿå§“åä»¥åŠå®¶åº­ä½å€ã€‚</span>
<span class="token keyword">select</span> name<span class="token punctuation">,</span>address <span class="token keyword">from</span> stu 
<span class="token keyword">where</span> age <span class="token operator">between</span> <span class="token number">20</span> <span class="token operator">and</span> <span class="token number">30</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="æ ¹æ®é›†åˆèŒƒå›´æŸ¥è¯¢"><a href="#æ ¹æ®é›†åˆèŒƒå›´æŸ¥è¯¢" class="header-anchor">#</a> æ ¹æ®é›†åˆèŒƒå›´æŸ¥è¯¢</h5> <blockquote><p>ä½¿ç”¨inè¿ç®—ç¬¦å¯ä»¥æŸ¥è¯¢æ»¡è¶³æŸä¸ªé›†åˆçš„ç»“æœã€‚</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- è¿”å›æ»¡è¶³20å²å’Œ21å²çš„å­¦ç”Ÿçš„æ‰€æœ‰ä¿¡æ¯</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu
<span class="token keyword">where</span> age <span class="token operator">in</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="å­—ç¬¦åŒ¹é…æŸ¥è¯¢"><a href="#å­—ç¬¦åŒ¹é…æŸ¥è¯¢" class="header-anchor">#</a> å­—ç¬¦åŒ¹é…æŸ¥è¯¢</h5> <blockquote><p>ä½¿ç”¨likeè¿ç®—ç¬¦å¯ä»¥å®ç°å­—ç¬¦çš„åŒ¹é…æŸ¥è¯¢</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- æŸ¥è¯¢æ€§â€œå¶â€çš„å­¦ç”Ÿçš„è¯¦ç»†ä¿¡æ¯</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu
<span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'å¶%'</span>
<span class="token comment">-- %æ„æ€æ˜¯åŒ¹é…ä¸€ä¸ªæˆ–è€…å¤šä¸ªå­—ç¬¦ï¼Œå¦‚æœè¿™ä¸ªç™¾åˆ†å·åœ¨â€œå¶â€çš„å‰é¢å°±ä¼šæŸ¥æ‰¾å§“åä¸­æœ€åä¸€ä¸ªå­—ä¸ºâ€œå¶â€çš„å­¦ç”Ÿã€‚</span>

<span class="token comment">-- æŸ¥è¯¢åå­—ä¸­ç¬¬äºŒä¸ªå­—ä¸ºâ€œäº‘â€æˆ–â€œé£â€çš„å­¦ç”Ÿçš„æ‰€æœ‰ä¿¡æ¯</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu
<span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'_[å°å¤§]%'</span>
<span class="token comment">-- []æ„ä¸ºåŒ¹é…[]ä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œ_æ„ä¸ºåŒ¹é…æ‰€æœ‰å­—ç¬¦</span>

<span class="token comment">-- æŸ¥è¯¢å­¦å·æœ€åä¸€ä½ä¸æ˜¯2ï¼Œ3ï¼Œ5çš„å­¦ç”Ÿçš„æ‰€æœ‰ä¿¡æ¯</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu
<span class="token keyword">where</span> <span class="token keyword">no</span> <span class="token operator">like</span> <span class="token string">'%[^235]'</span>
<span class="token comment">-- [^]æ„ä¸ºä¸åŒ¹é…[]ä¸­çš„å­—ç¬¦</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h5 id="æ¶‰åŠåˆ°nullçš„æƒ…å†µ"><a href="#æ¶‰åŠåˆ°nullçš„æƒ…å†µ" class="header-anchor">#</a> æ¶‰åŠåˆ°nullçš„æƒ…å†µ</h5> <blockquote><p>å¦‚æœé‡åˆ°ç©ºå€¼è¦ç”¨isè¿›è¡Œåˆ¤æ–­ã€‚</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">--æŸ¥è¯¢ç¼ºå°‘åœ°å€ä¿¡æ¯çš„å­¦ç”Ÿçš„å…¨éƒ¨ä¿¡æ¯ã€‚</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu
<span class="token keyword">where</span> address <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="andå’Œor"><a href="#andå’Œor" class="header-anchor">#</a> andå’Œor</h5> <blockquote><p>andå’Œorå¯ä»¥ç»„åˆæˆå¤šé‡æ¡ä»¶æŸ¥è¯¢</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- æŸ¥è¯¢å®¶ä½åœ¨beijingå¹¶ä¸”å¹´é¾„ä¸º20å²ä»¥ä¸‹çš„åŒå­¦çš„å…¨éƒ¨ä¿¡æ¯ã€‚</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu
<span class="token keyword">where</span> address <span class="token operator">=</span> <span class="token string">'beijing'</span> <span class="token operator">and</span> age <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="æ•°æ®æ’åºæŸ¥è¯¢"><a href="#æ•°æ®æ’åºæŸ¥è¯¢" class="header-anchor">#</a> æ•°æ®æ’åºæŸ¥è¯¢</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- å°†æŸ¥è¯¢å‡ºæ¥çš„å­¦ç”Ÿçš„ä¿¡æ¯æŒ‰ç…§å¹´é¾„å‡åºæ’åº</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu <span class="token keyword">order</span> <span class="token keyword">by</span> age

<span class="token comment">-- å°†æŸ¥è¯¢å‡ºæ¥çš„å­¦ç”Ÿä¿¡æ¯æŒ‰ç…§å¹´é¾„é™åºæ’åºï¼Œå¹´é¾„å¦‚æœç›¸åŒçš„æŒ‰æˆç»©å‡åºæ’åº</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu <span class="token keyword">order</span> <span class="token keyword">by</span> age <span class="token keyword">desc</span><span class="token punctuation">,</span>score<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="ä½¿ç”¨è®¡ç®—å‡½æ•°"><a href="#ä½¿ç”¨è®¡ç®—å‡½æ•°" class="header-anchor">#</a> ä½¿ç”¨è®¡ç®—å‡½æ•°</h3> <h4 id="count-å‡½æ•°"><a href="#count-å‡½æ•°" class="header-anchor">#</a> count()å‡½æ•°</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- ç»Ÿè®¡å­¦ç”Ÿçš„æ€»äººæ•°</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> student

<span class="token comment">--ç»Ÿè®¡å­¦ç”Ÿè¡¨ä¸­çš„åœ°å€ç§ç±»ä¸€å…±æœ‰å¤šå°‘ä¸ª</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token keyword">distinct</span> address<span class="token punctuation">)</span> <span class="token keyword">from</span> stu
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="sum-å‡½æ•°å’Œavg-å‡½æ•°"><a href="#sum-å‡½æ•°å’Œavg-å‡½æ•°" class="header-anchor">#</a> sum()å‡½æ•°å’Œavg()å‡½æ•°</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- è®¡ç®—stuè¡¨ä¸­çš„æ‰€æœ‰å­¦ç”Ÿçš„å¹´é¾„æ€»å€¼å’Œå¹³å‡å€¼ã€‚</span>
<span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token keyword">from</span> stu
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="max-å‡½æ•°å’Œmin-å‡½æ•°"><a href="#max-å‡½æ•°å’Œmin-å‡½æ•°" class="header-anchor">#</a> max()å‡½æ•°å’Œmin()å‡½æ•°</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- æŸ¥è¯¢å®¶ä½beijingçš„åŒå­¦ä¸­å¹´é¾„æœ€å°çš„å’Œå¹´é¾„æœ€å¤§çš„ã€‚</span>
<span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">max</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token keyword">from</span> stu
<span class="token keyword">where</span> address <span class="token operator">=</span> <span class="token string">'beijing'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="å¯¹æŸ¥è¯¢ç»“æœåˆ†ç»„è®¡ç®—"><a href="#å¯¹æŸ¥è¯¢ç»“æœåˆ†ç»„è®¡ç®—" class="header-anchor">#</a> å¯¹æŸ¥è¯¢ç»“æœåˆ†ç»„è®¡ç®—</h3> <h4 id="ä½¿ç”¨group-byè¯­å¥"><a href="#ä½¿ç”¨group-byè¯­å¥" class="header-anchor">#</a> ä½¿ç”¨group byè¯­å¥</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- ç»Ÿè®¡ä¸åŒåŒºåŸŸçš„å­¦ç”Ÿäººæ•°</span>
<span class="token keyword">select</span> address<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> stu <span class="token keyword">group</span> <span class="token keyword">by</span> address
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="intoè¯­å¥"><a href="#intoè¯­å¥" class="header-anchor">#</a> intoè¯­å¥</h3> <blockquote><p>intoè¯­å¥ç”¨äºå°†æŸ¥è¯¢çš„ç»“æœæ”¾åˆ°ä¸€ä¸ªæ–°è¡¨ä¸­</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- æŸ¥è¯¢å®¶ä½beijingçš„åŒå­¦çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå¹¶å°†ç»“æœä¿å­˜åˆ°beijing_stuè¡¨ä¸­</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">into</span> beijing_stu 
<span class="token keyword">from</span> stu
<span class="token keyword">where</span> address <span class="token operator">=</span> <span class="token string">'beijing'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="å­æŸ¥è¯¢"><a href="#å­æŸ¥è¯¢" class="header-anchor">#</a> å­æŸ¥è¯¢</h2> <h3 id="å•å€¼åµŒå¥—æŸ¥è¯¢"><a href="#å•å€¼åµŒå¥—æŸ¥è¯¢" class="header-anchor">#</a> å•å€¼åµŒå¥—æŸ¥è¯¢</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- æŸ¥è¯¢stuä¸­åœ°å€ä¸ºbeijingçš„å­¦ç”Ÿçš„å­¦å·å’Œæˆç»©</span>
<span class="token keyword">select</span> <span class="token keyword">no</span><span class="token punctuation">,</span>grade
<span class="token keyword">from</span> stu
<span class="token keyword">where</span> area <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> area <span class="token keyword">from</span> area_table <span class="token keyword">where</span> address <span class="token operator">=</span> <span class="token string">'beijing'</span><span class="token punctuation">)</span>
<span class="token comment">--å…ˆä»å†…æŸ¥è¯¢ä¸­æ‰¾å‡ºåŒ—äº¬çš„åŒºåŸŸå·ï¼Œç„¶åå†æ ¹æ®åŒ—äº¬çš„åŒºåŸŸå·ç¡®å®šå­¦ç”Ÿçš„å­¦å·å’Œæˆç»©</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="å¤šå€¼åµŒå¥—æŸ¥è¯¢"><a href="#å¤šå€¼åµŒå¥—æŸ¥è¯¢" class="header-anchor">#</a> å¤šå€¼åµŒå¥—æŸ¥è¯¢</h3> <h4 id="ä½¿ç”¨inè¿ç®—ç¬¦"><a href="#ä½¿ç”¨inè¿ç®—ç¬¦" class="header-anchor">#</a> ä½¿ç”¨inè¿ç®—ç¬¦</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- æŸ¥è¯¢æˆç»©å¤§äº90åˆ†çš„å­¦ç”Ÿçš„å§“åå’Œè‹±è¯­æˆç»©</span>
<span class="token comment">-- å‡è®¾stuè¡¨ä¸­æ²¡æœ‰å­¦ç”Ÿçš„è‹±è¯­æˆç»©,ä½†scoreè¡¨ä¸­æœ‰å­¦å·å¯¹åº”çš„æˆç»©</span>
<span class="token keyword">select</span> name<span class="token punctuation">,</span>english_score <span class="token keyword">from</span> stu
<span class="token keyword">where</span> <span class="token keyword">no</span> <span class="token operator">in</span><span class="token punctuation">(</span>
    <span class="token keyword">select</span> <span class="token keyword">no</span> <span class="token keyword">from</span> score
    <span class="token keyword">where</span> grade <span class="token operator">&gt;</span> <span class="token number">90</span> 
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="ä½¿ç”¨å­æŸ¥è¯¢è¿›è¡Œæ¯”è¾ƒæµ‹è¯•"><a href="#ä½¿ç”¨å­æŸ¥è¯¢è¿›è¡Œæ¯”è¾ƒæµ‹è¯•" class="header-anchor">#</a> ä½¿ç”¨å­æŸ¥è¯¢è¿›è¡Œæ¯”è¾ƒæµ‹è¯•</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- æŸ¥è¯¢é€‰ä¿®äº†&quot;æ•°æ®ç»“æ„&quot;å¹¶ä¸”æˆç»©é«˜äºè¯¥è¯¾ç¨‹å¹³å‡åˆ†çš„å­¦ç”Ÿçš„å…¨éƒ¨ä¿¡æ¯</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu
<span class="token keyword">where</span> course <span class="token operator">=</span> <span class="token string">'æ•°æ®ç»“æ„'</span> 
<span class="token operator">and</span> grade <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>grade<span class="token punctuation">)</span> <span class="token keyword">from</span> stu <span class="token keyword">where</span> course <span class="token operator">=</span> <span class="token string">'æ•°æ®ç»“æ„'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="ä½¿ç”¨anyåŠallè¿ç®—ç¬¦"><a href="#ä½¿ç”¨anyåŠallè¿ç®—ç¬¦" class="header-anchor">#</a> ä½¿ç”¨anyåŠallè¿ç®—ç¬¦</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- æŸ¥è¯¢é€‰ä¿®â€œæ•°æ®ç»“æ„â€çš„å­¦ç”Ÿæˆç»©æ¯”é€‰ä¿®&quot;ç¦»æ•£æ•°å­¦&quot;çš„å­¦ç”Ÿæœ€ä½æˆç»©é«˜çš„å­¦ç”Ÿå…¨éƒ¨ä¿¡æ¯</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu
<span class="token keyword">where</span> course <span class="token operator">=</span> <span class="token string">'æ•°æ®ç»“æ„'</span> 
<span class="token operator">and</span> grade <span class="token operator">&gt;</span> <span class="token keyword">any</span><span class="token punctuation">(</span><span class="token keyword">select</span> grade <span class="token keyword">from</span> stu <span class="token keyword">where</span> course <span class="token operator">=</span> <span class="token string">'ç¦»æ•£æ•°å­¦'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- any(æˆ–some)æ„ä¸ºæ»¡è¶³å…¶ä¸­ä»»æ„ä¸€ä¸ªå€¼å°±è¿”å›trueï¼Œæ¡ä»¶è¾ƒä¸ºå®½æ¾</span>

<span class="token comment">-- æŸ¥è¯¢é€‰ä¿®&quot;æ•°æ®ç»“æ„&quot;çš„å­¦ç”Ÿæˆç»©æ¯”é€‰ä¿®â€œç¦»æ•£æ•°å­¦â€çš„å­¦ç”Ÿæœ€é«˜æˆç»©è¿˜è¦é«˜çš„å­¦ç”Ÿå…¨éƒ¨ä¿¡æ¯</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu
<span class="token keyword">where</span> course <span class="token operator">=</span> <span class="token string">'æ•°æ®ç»“æ„'</span>
<span class="token operator">and</span> grade <span class="token operator">&gt;</span> <span class="token keyword">all</span><span class="token punctuation">(</span><span class="token keyword">select</span> grade <span class="token keyword">from</span> stu <span class="token keyword">where</span> course <span class="token operator">=</span> <span class="token string">'ç¦»æ•£æ•°å­¦'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- allæ„ä¸ºæ»¡è¶³æ‰€æœ‰æŸ¥è¯¢æ¡ä»¶æ‰ä¼šç»™ä½ è¿”å›trueï¼Œæ¡ä»¶è¾ƒä¸ºä¸¥æ ¼</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="è¿æ¥æŸ¥è¯¢"><a href="#è¿æ¥æŸ¥è¯¢" class="header-anchor">#</a> è¿æ¥æŸ¥è¯¢</h2> <blockquote><p><strong>customers</strong>è¡¨ä¸­å­˜å‚¨çš„æ¶ˆè´¹è€…çš„è¯¦ç»†ä¿¡æ¯</p></blockquote> <div class="language- extra-class"><pre><code>+----+----------+-----+-----------+----------+
| ID | NAME     | AGE | ADDRESS   | SALARY   |
+----+----------+-----+-----------+----------+
|  1 | Ramesh   |  32 | Ahmedabad |  2000.00 |
|  2 | Khilan   |  25 | Delhi     |  1500.00 |
|  3 | kaushik  |  23 | Kota      |  2000.00 |
|  4 | Chaitali |  24 | Mumbai    |  6500.00 |
|  5 | Hardik   |  27 | Bhopal    |  8500.00 |
|  6 | Komal    |  22 | MP        |  4500.00 |
|  7 | Muffy    |  24 | Indore    | 10000.00 |
+----+----------+-----+-----------+----------+
</code></pre></div><blockquote><p><strong>order</strong>è¡¨æ˜¯ä¹Ÿæ˜¯é¡¾å®¢çš„æ¶ˆè´¹ä¿¡æ¯ï¼Œä¸è¿‡æ²¡æœ‰åå­—ï¼Œåªæœ‰å¯¹åº”çš„id</p></blockquote> <div class="language- extra-class"><pre><code>+-----+---------------------+-------------+--------+
|OID  | DATE                | CUSTOMER_ID | AMOUNT |
+-----+---------------------+-------------+--------+
| 102 | 2009-10-08 00:00:00 |           3 |   3000 |
| 100 | 2009-10-08 00:00:00 |           3 |   1500 |
| 101 | 2009-11-20 00:00:00 |           2 |   1560 |
| 103 | 2008-05-20 00:00:00 |           4 |   2060 |
+-----+---------------------+-------------+--------+
</code></pre></div><h3 id="è‡ªè¿æ¥"><a href="#è‡ªè¿æ¥" class="header-anchor">#</a> è‡ªè¿æ¥</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- æŸ¥è¯¢ä¸muffyå¹´é¾„ç›¸åŒçš„äººçš„å…¨éƒ¨ä¿¡æ¯</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> customers cus1 <span class="token keyword">join</span> customers cus2
<span class="token keyword">on</span> cus1<span class="token punctuation">.</span>age <span class="token operator">=</span> cus2<span class="token punctuation">.</span>age
<span class="token keyword">where</span> cus1<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'muffy'</span> <span class="token operator">and</span> cus2<span class="token punctuation">.</span>name <span class="token operator">!=</span> <span class="token string">'muffy'</span><span class="token punctuation">;</span>
<span class="token comment">-- è‡ªè¿æ¥æ˜¯æŒ‡ä¸€ä¸ªè¡¨è‡ªå·±ä¸è‡ªå·±å»ºç«‹è¿æ¥ï¼Œå› æ­¤åœ¨é€»è¾‘ä¸Šè¦åˆ†æˆä¸¤ä¸ªè¡¨ï¼Œå¹¶å–åˆ«åã€‚</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="å†…éƒ¨è¿æ¥"><a href="#å†…éƒ¨è¿æ¥" class="header-anchor">#</a> å†…éƒ¨è¿æ¥</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- æ ¹æ®ordersè¡¨çš„å†…å®¹æŸ¥è¯¢å…¶å¯¹åº”çš„idï¼Œå§“åï¼Œè´­ä¹°é‡ï¼Œæ¶ˆè´¹æ—¥æœŸã€‚</span>
<span class="token keyword">select</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>amount<span class="token punctuation">,</span><span class="token keyword">date</span>
<span class="token keyword">from</span> customers
<span class="token keyword">inner</span> <span class="token keyword">join</span> orders <span class="token keyword">on</span> customers<span class="token punctuation">.</span>id <span class="token operator">=</span> orders<span class="token punctuation">.</span>id<span class="token punctuation">;</span>

<span class="token comment">-- æŸ¥è¯¢é¡¾å®¢è´­ä¹°é‡ä¸º3000çš„é¡¾å®¢çš„å§“åå’Œå¹´é¾„ã€‚</span>
<span class="token keyword">select</span> name<span class="token punctuation">,</span>age <span class="token keyword">from</span> customers
<span class="token keyword">inner</span> <span class="token keyword">join</span> orders <span class="token keyword">on</span> customer<span class="token punctuation">.</span>id <span class="token operator">=</span> orders<span class="token punctuation">.</span>id
<span class="token keyword">where</span> orders<span class="token punctuation">.</span>amount <span class="token operator">=</span> <span class="token number">3000</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="å¤–éƒ¨è¿æ¥"><a href="#å¤–éƒ¨è¿æ¥" class="header-anchor">#</a> å¤–éƒ¨è¿æ¥</h3> <h4 id="å·¦å¤–è¿æ¥"><a href="#å·¦å¤–è¿æ¥" class="header-anchor">#</a> å·¦å¤–è¿æ¥</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- æ ¹æ®é¡¾å®¢è¡¨æŸ¥è¯¢å…¨éƒ¨é¡¾å®¢çš„idï¼Œå§“åï¼Œè´­ä¹°é‡ï¼Œè´­ä¹°æ—¥æœŸã€‚</span>
<span class="token keyword">select</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>amount<span class="token punctuation">,</span><span class="token keyword">date</span> <span class="token keyword">from</span> customers 
<span class="token keyword">left</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> orders
<span class="token keyword">on</span> customers<span class="token punctuation">.</span>id <span class="token operator">=</span> orders<span class="token punctuation">.</span>id
<span class="token comment">-- å·¦å¤–è¿æ¥çš„æ„æ€å°±æ˜¯å°†è‡ªå·±ä»å·¦è¾¹è¿æ¥ä¸€ä¸ªè¡¨ç„¶åæŸ¥è¯¢ï¼Œæ­¤æ—¶æŸ¥è¯¢çš„â€œè§†è§’â€æ˜¯è‡ªå·±ï¼Œä¸»è¦é™åˆ¶å¦ä¸€å¼ è¡¨</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>è¾“å‡ºç»“æœ</p></blockquote> <div class="language- extra-class"><pre><code>+----+----------+--------+---------------------+
| ID | NAME     | AMOUNT | DATE                |
+----+----------+--------+---------------------+
|  1 | Ramesh   |   NULL | NULL                |
|  2 | Khilan   |   1560 | 2009-11-20 00:00:00 |
|  3 | kaushik  |   3000 | 2009-10-08 00:00:00 |
|  3 | kaushik  |   1500 | 2009-10-08 00:00:00 |
|  4 | Chaitali |   2060 | 2008-05-20 00:00:00 |
|  5 | Hardik   |   NULL | NULL                |
|  6 | Komal    |   NULL | NULL                |
|  7 | Muffy    |   NULL | NULL                |
+----+----------+--------+---------------------+
</code></pre></div><h4 id="å³å¤–è¿æ¥"><a href="#å³å¤–è¿æ¥" class="header-anchor">#</a> å³å¤–è¿æ¥</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- æ ¹æ®é¡¾å®¢è¡¨æŸ¥è¯¢å…¨éƒ¨é¡¾å®¢çš„idï¼Œå§“åï¼Œè´­ä¹°é‡ï¼Œè´­ä¹°æ—¥æœŸã€‚</span>
<span class="token keyword">select</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>amount<span class="token punctuation">,</span><span class="token keyword">date</span> <span class="token keyword">from</span> customers 
<span class="token keyword">right</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> orders
<span class="token keyword">on</span> customers<span class="token punctuation">.</span>id <span class="token operator">=</span> orders<span class="token punctuation">.</span>id
<span class="token comment">-- å³å¤–è¿æ¥çš„æ„æ€å°±æ˜¯å°†è‡ªå·±ä»å³è¾¹è¿æ¥ä¸€ä¸ªè¡¨ç„¶åæŸ¥è¯¢ï¼Œæ­¤æ—¶æŸ¥è¯¢çš„â€œè§†è§’â€æ˜¯å¦ä¸€å¼ è¡¨ï¼Œä¸»è¦é™åˆ¶è‡ªå·±</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>æŸ¥è¯¢ç»“æœ</p></blockquote> <div class="language- extra-class"><pre><code>+------+----------+--------+---------------------+
| ID   | NAME     | AMOUNT | DATE                |
+------+----------+--------+---------------------+
|    3 | kaushik  |   3000 | 2009-10-08 00:00:00 |
|    3 | kaushik  |   1500 | 2009-10-08 00:00:00 |
|    2 | Khilan   |   1560 | 2009-11-20 00:00:00 |
|    4 | Chaitali |   2060 | 2008-05-20 00:00:00 |
+------+----------+--------+---------------------+
</code></pre></div><h4 id="å…¨è¿æ¥"><a href="#å…¨è¿æ¥" class="header-anchor">#</a> å…¨è¿æ¥</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- å…¨è¿æ¥ä¼šè¿”å›ä¸¤ä¸ªè¡¨çš„æ‰€æœ‰è¡Œï¼Œä¸ç®¡ä»–ä»¬æ˜¯å¦æ»¡è¶³è¿æ¥æ¡ä»¶</span>
<span class="token keyword">select</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>amount<span class="token punctuation">,</span><span class="token keyword">date</span> <span class="token keyword">from</span> customers 
<span class="token keyword">full</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> orders
<span class="token keyword">on</span> customers<span class="token punctuation">.</span>id <span class="token operator">=</span> orders<span class="token punctuation">.</span>id
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>æŸ¥è¯¢ç»“æœ</p></blockquote> <div class="language- extra-class"><pre><code>+------+----------+--------+---------------------+
| ID   | NAME     | AMOUNT | DATE                |
+------+----------+--------+---------------------+
|    1 | Ramesh   |   NULL | NULL                |
|    2 | Khilan   |   1560 | 2009-11-20 00:00:00 |
|    3 | kaushik  |   3000 | 2009-10-08 00:00:00 |
|    3 | kaushik  |   1500 | 2009-10-08 00:00:00 |
|    4 | Chaitali |   2060 | 2008-05-20 00:00:00 |
|    5 | Hardik   |   NULL | NULL                |
|    6 | Komal    |   NULL | NULL                |
|    7 | Muffy    |   NULL | NULL                |
|    3 | kaushik  |   3000 | 2009-10-08 00:00:00 |
|    3 | kaushik  |   1500 | 2009-10-08 00:00:00 |
|    2 | Khilan   |   1560 | 2009-11-20 00:00:00 |
|    4 | Chaitali |   2060 | 2008-05-20 00:00:00 |
+------+----------+--------+---------------------+
</code></pre></div><h3 id="äº¤å‰è¿æ¥"><a href="#äº¤å‰è¿æ¥" class="header-anchor">#</a> äº¤å‰è¿æ¥</h3> <blockquote><p>äº¤å‰è¿æ¥ä¼šè¿”å›ä¸¤ä¸ªè¿æ¥è¡¨çš„æ‰€æœ‰æ•°æ®è¡Œçš„ç¬›å¡å°”ç§¯ã€‚</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- å°†ä¸Šé¢ä¸¤ä¸ªè¡¨å…¨è¿æ¥</span>
<span class="token keyword">select</span>  id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> amount<span class="token punctuation">,</span> <span class="token keyword">date</span>
<span class="token keyword">from</span> customers<span class="token punctuation">,</span> orders<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>æŸ¥è¯¢ç»“æœä¸€å…±æ˜¯4x7=28è¡Œ</p></blockquote> <div class="language- extra-class"><pre><code>+----+----------+--------+---------------------+
| ID | NAME     | AMOUNT | DATE                |
+----+----------+--------+---------------------+
|  1 | Ramesh   |   3000 | 2009-10-08 00:00:00 |
|  1 | Ramesh   |   1500 | 2009-10-08 00:00:00 |
|  1 | Ramesh   |   1560 | 2009-11-20 00:00:00 |
|  1 | Ramesh   |   2060 | 2008-05-20 00:00:00 |
|  2 | Khilan   |   3000 | 2009-10-08 00:00:00 |
|  2 | Khilan   |   1500 | 2009-10-08 00:00:00 |
|  2 | Khilan   |   1560 | 2009-11-20 00:00:00 |
|  2 | Khilan   |   2060 | 2008-05-20 00:00:00 |
|  3 | kaushik  |   3000 | 2009-10-08 00:00:00 |
|  3 | kaushik  |   1500 | 2009-10-08 00:00:00 |
|  3 | kaushik  |   1560 | 2009-11-20 00:00:00 |
|  3 | kaushik  |   2060 | 2008-05-20 00:00:00 |
|  4 | Chaitali |   3000 | 2009-10-08 00:00:00 |
|  4 | Chaitali |   1500 | 2009-10-08 00:00:00 |
|  4 | Chaitali |   1560 | 2009-11-20 00:00:00 |
|  4 | Chaitali |   2060 | 2008-05-20 00:00:00 |
|  5 | Hardik   |   3000 | 2009-10-08 00:00:00 |
|  5 | Hardik   |   1500 | 2009-10-08 00:00:00 |
|  5 | Hardik   |   1560 | 2009-11-20 00:00:00 |
|  5 | Hardik   |   2060 | 2008-05-20 00:00:00 |
|  6 | Komal    |   3000 | 2009-10-08 00:00:00 |
|  6 | Komal    |   1500 | 2009-10-08 00:00:00 |
|  6 | Komal    |   1560 | 2009-11-20 00:00:00 |
|  6 | Komal    |   2060 | 2008-05-20 00:00:00 |
|  7 | Muffy    |   3000 | 2009-10-08 00:00:00 |
|  7 | Muffy    |   1500 | 2009-10-08 00:00:00 |
|  7 | Muffy    |   1560 | 2009-11-20 00:00:00 |
|  7 | Muffy    |   2060 | 2008-05-20 00:00:00 |
+----+----------+--------+---------------------+
</code></pre></div><h2 id="é›†åˆè¿ç®—æŸ¥è¯¢"><a href="#é›†åˆè¿ç®—æŸ¥è¯¢" class="header-anchor">#</a> é›†åˆè¿ç®—æŸ¥è¯¢</h2> <h3 id="å¹¶è¿ç®—"><a href="#å¹¶è¿ç®—" class="header-anchor">#</a> å¹¶è¿ç®—</h3> <blockquote><p>unionæ“ä½œç¬¦å¯ä»¥å¯ä»¥å°†æœ€ç»ˆçš„æŸ¥è¯¢ç»“æœå–å¹¶é›†
<strong>æ³¨æ„</strong>ï¼šå‚ä¸ä»»ä½•é›†åˆè¿ç®—çš„æŸ¥è¯¢è¡¨ç»“æ„åº”è¯¥ç›¸åŒ</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- ç”¨unionè¯­å¥å°†ä¹‹å‰çš„å·¦å¤–è¿æ¥å’Œå³å¤–è¿æ¥å¹¶èµ·æ¥</span>
<span class="token keyword">select</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>amount<span class="token punctuation">,</span><span class="token keyword">date</span> <span class="token keyword">from</span> customers 
<span class="token keyword">left</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> orders
<span class="token keyword">on</span> customers<span class="token punctuation">.</span>id <span class="token operator">=</span> orders<span class="token punctuation">.</span>id
<span class="token keyword">union</span>
<span class="token keyword">select</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>amount<span class="token punctuation">,</span><span class="token keyword">date</span> <span class="token keyword">from</span> customers
<span class="token keyword">right</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> orders
<span class="token keyword">on</span> customers<span class="token punctuation">.</span>id <span class="token operator">=</span> orders<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>æŸ¥è¯¢ç»“æœ</p></blockquote> <div class="language- extra-class"><pre><code>+------+----------+--------+---------------------+
| ID   | NAME     | AMOUNT | DATE                |
+------+----------+--------+---------------------+
|    1 | Ramesh   |   NULL | NULL                |
|    2 | Khilan   |   1560 | 2009-11-20 00:00:00 |
|    3 | kaushik  |   3000 | 2009-10-08 00:00:00 |
|    3 | kaushik  |   1500 | 2009-10-08 00:00:00 |
|    4 | Chaitali |   2060 | 2008-05-20 00:00:00 |
|    5 | Hardik   |   NULL | NULL                |
|    6 | Komal    |   NULL | NULL                |
|    7 | Muffy    |   NULL | NULL                |
+------+----------+--------+---------------------+
</code></pre></div><h3 id="äº¤è¿ç®—"><a href="#äº¤è¿ç®—" class="header-anchor">#</a> äº¤è¿ç®—</h3> <blockquote><p><strong>intersect</strong>è¯­å¥ï¼Œç”¨æ³•å’Œunionè¯­å¥ç±»ä¼¼ï¼Œåªä¸è¿‡æœ€ç»ˆæ˜¯ä»ä¸¤ä¸ªæŸ¥è¯¢ç»“æœé‡Œå–äº¤é›†ã€‚</p></blockquote> <h3 id="å·®è¿ç®—"><a href="#å·®è¿ç®—" class="header-anchor">#</a> å·®è¿ç®—</h3> <blockquote><p><strong>except</strong>è¯­å¥ï¼Œç”¨æ³•åŒä¸Šï¼Œä¼šå°†ç¬¬ä¸€ä¸ªselectç»“æœä¸­æœ‰ï¼Œä½†æ˜¯ç¬¬äºŒä¸ªselectç»“æœä¸­æ²¡æœ‰çš„è¡Œè¿”å›ã€‚</p></blockquote> <h2 id="caseå‡½æ•°æŸ¥è¯¢"><a href="#caseå‡½æ•°æŸ¥è¯¢" class="header-anchor">#</a> caseå‡½æ•°æŸ¥è¯¢</h2> <h3 id="ç®€å•caseå‡½æ•°"><a href="#ç®€å•caseå‡½æ•°" class="header-anchor">#</a> ç®€å•caseå‡½æ•°</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/*
å‡è®¾å­¦ç”Ÿè¡¨ä¸­æœ‰å­¦ç”Ÿçš„é€‰è¯¾ä¿¡æ¯
æŸ¥è¯¢é€‰äº†æ•°æ®ç»“æ„çš„å­¦ç”Ÿçš„å§“åï¼Œæ‰€åœ¨ç³»å’Œæˆç»©ã€‚
å…¶ä¸­æ‰€åœ¨ç³»å­æ®µè¿›è¡Œå¦‚ä¸‹å¤„ç†ï¼š
    å½“æ‰€åœ¨ç³»ä¸ºæ•°å­¦ç³»æ—¶ï¼Œæ˜¾ç¤ºä¸º&quot;MA&quot;
    å½“æ‰€åœ¨ç³»ä¸ºè®¡ç®—æœºç³»æ—¶ï¼Œæ˜¾ç¤ºä¸º&quot;CS&quot;
*/</span>
<span class="token keyword">select</span> name<span class="token punctuation">,</span>
<span class="token keyword">case</span> majored
    <span class="token keyword">when</span> <span class="token string">'æ•°å­¦ç³»'</span> <span class="token keyword">then</span> <span class="token string">'MA'</span>
    <span class="token keyword">when</span> <span class="token string">'è®¡ç®—æœºç³»'</span> <span class="token keyword">then</span> <span class="token string">'CS'</span>
<span class="token keyword">end</span><span class="token punctuation">,</span>grade <span class="token keyword">from</span> stu <span class="token keyword">where</span> course <span class="token operator">=</span> <span class="token string">'æ•°æ®ç»“æ„'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="æœç´¢caseå‡½æ•°"><a href="#æœç´¢caseå‡½æ•°" class="header-anchor">#</a> æœç´¢caseå‡½æ•°</h3> <blockquote><p>æœç´¢caseå‡½æ•°å¯ä»¥å®ŒæˆèŒƒå›´å†…çš„æƒ…å†µåˆ¤æ–­ã€‚</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/*
æŸ¥è¯¢é€‰ä¿®äº†æ•°æ®ç»“æ„çš„å­¦ç”Ÿçš„è€ƒè¯•æƒ…å†µï¼Œåˆ—å‡ºå§“åä»¥åŠæ˜¯å¦åŠæ ¼
    å…¶ä¸­æˆç»©å¤§äº60åˆ†æ˜¾ç¤ºåŠæ ¼
    æˆç»©å°äº60åˆ†æ˜¾ç¤ºä¸åŠæ ¼
*/</span>
<span class="token keyword">select</span> name<span class="token punctuation">,</span><span class="token keyword">case</span>
    <span class="token keyword">when</span> data_structure_score <span class="token operator">&gt;=</span> <span class="token number">60</span> <span class="token keyword">then</span> <span class="token string">'åŠæ ¼'</span>
    <span class="token keyword">when</span> data_structure_score <span class="token operator">&lt;</span> <span class="token number">60</span> <span class="token keyword">then</span> <span class="token string">'ä¸åŠæ ¼'</span>
<span class="token keyword">end</span> <span class="token keyword">as</span> æ˜¯å¦åŠæ ¼ <span class="token keyword">from</span> stu <span class="token keyword">where</span> course <span class="token operator">=</span> <span class="token string">'æ•°æ®ç»“æ„'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="header-anchor">#</a> ç´¢å¼•</h2> <blockquote><p>ä½¿ç”¨ç´¢å¼•å¯ä»¥æé«˜æŸ¥è¯¢çš„é€Ÿåº¦ï¼Œä½†æ˜¯ä¼šé™ä½æ›´æ–°å’Œæ’å…¥æ•°æ®çš„é€Ÿåº¦ã€‚</p></blockquote> <h3 id="åˆ›å»ºç´¢å¼•"><a href="#åˆ›å»ºç´¢å¼•" class="header-anchor">#</a> åˆ›å»ºç´¢å¼•</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- ä¸ºstuè¡¨çš„nameå­—æ®µå†å•ç‹¬åˆ›å»ºå‡ºä¸€ä¸ªéèšé›†ç´¢å¼•</span>
<span class="token keyword">create</span> <span class="token keyword">index</span> name_index <span class="token keyword">on</span> stu<span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- ä¸ºstuçš„idå­æ®µåˆ›å»ºå‡ºä¸€ä¸ªå”¯ä¸€çš„èšé›†ç´¢å¼•</span>
<span class="token keyword">create</span> <span class="token keyword">unique</span> <span class="token keyword">clustered</span> <span class="token keyword">index</span> id_index <span class="token keyword">on</span> stu<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- èšé›†ç´¢å¼•ç”¨æ¥ç¡®å®šè¡¨ä¸­æ•°æ®çš„ç‰©ç†é¡ºåºã€‚ </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="ç®¡ç†ç´¢å¼•"><a href="#ç®¡ç†ç´¢å¼•" class="header-anchor">#</a> ç®¡ç†ç´¢å¼•</h3> <h4 id="æŸ¥çœ‹ç´¢å¼•"><a href="#æŸ¥çœ‹ç´¢å¼•" class="header-anchor">#</a> æŸ¥çœ‹ç´¢å¼•</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- æŸ¥çœ‹stuè¡¨çš„ç´¢å¼•ä¿¡æ¯</span>
<span class="token keyword">exec</span> sp_helpindex stu

<span class="token comment">-- ç¦ç”¨id_indexç´¢å¼•</span>
<span class="token keyword">alter</span> <span class="token keyword">index</span> id_index <span class="token keyword">on</span> stu <span class="token keyword">disable</span><span class="token punctuation">;</span>

<span class="token comment">-- å°†name_indexæ›´æ”¹ä¸ºxingming_index</span>
<span class="token keyword">exec</span> sp_rename <span class="token string">'stu.name_index'</span><span class="token punctuation">,</span><span class="token string">'xingming_index'</span><span class="token punctuation">,</span><span class="token string">'index'</span><span class="token punctuation">;</span>

<span class="token comment">-- åˆ é™¤stuè¡¨ä¸­çš„name_indexç´¢å¼•ã€‚</span>
<span class="token keyword">drop</span> <span class="token keyword">index</span> name_index<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="è§†å›¾"><a href="#è§†å›¾" class="header-anchor">#</a> è§†å›¾</h2> <blockquote><p>è§†å›¾ç®€å•æ¥è¯´å°±æ˜¯å­˜å‚¨åœ¨æ•°æ®åº“ä¸­è¢«å°è£…å¥½çš„selectè¯­å¥ã€‚</p></blockquote> <h3 id="åˆ›å»ºè§†å›¾"><a href="#åˆ›å»ºè§†å›¾" class="header-anchor">#</a> åˆ›å»ºè§†å›¾</h3> <h4 id="å•è¡¨è§†å›¾"><a href="#å•è¡¨è§†å›¾" class="header-anchor">#</a> å•è¡¨è§†å›¾</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- åˆ›å»ºèƒ½å¤ŸæŸ¥è¯¢customersè¡¨ä¸­çš„å§“åå’Œå¹´é¾„çš„è§†å›¾</span>
<span class="token keyword">create</span> <span class="token keyword">view</span> customers_view <span class="token keyword">as</span>
<span class="token keyword">select</span> name<span class="token punctuation">,</span>age
<span class="token keyword">from</span> customers<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="å¸¦æ£€æŸ¥é¡¹çš„è§†å›¾"><a href="#å¸¦æ£€æŸ¥é¡¹çš„è§†å›¾" class="header-anchor">#</a> å¸¦æ£€æŸ¥é¡¹çš„è§†å›¾</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- åœ¨é€šè¿‡ä¸‹é¢è¿™ä¸ªè§†å›¾æ’å…¥æˆ–è€…ä¿®æ”¹æ•°æ®çš„æ—¶å€™å°±ä¼šæ‹’ç»ageä¸ºnullçš„æ¡ç›®ã€‚</span>
<span class="token keyword">create</span> <span class="token keyword">view</span> customers_view <span class="token keyword">as</span>
<span class="token keyword">select</span> name<span class="token punctuation">,</span>age
<span class="token keyword">from</span> customers
<span class="token keyword">where</span> age <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span>
<span class="token keyword">with</span> <span class="token keyword">check</span> <span class="token keyword">option</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="å¤šè¡¨è§†å›¾"><a href="#å¤šè¡¨è§†å›¾" class="header-anchor">#</a> å¤šè¡¨è§†å›¾</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- åœ¨stuå’Œstu_detailä¸Šåˆ›å»ºstu_infoè§†å›¾</span>
<span class="token keyword">create</span> stu_info <span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>age<span class="token punctuation">)</span>
<span class="token keyword">as</span> <span class="token keyword">select</span> stu<span class="token punctuation">.</span>id<span class="token punctuation">,</span>stu<span class="token punctuation">.</span>name<span class="token punctuation">,</span>stu_detail<span class="token punctuation">.</span>age
<span class="token keyword">from</span> stu<span class="token punctuation">,</span>stu_detail
<span class="token keyword">where</span> stu<span class="token punctuation">.</span>id <span class="token operator">=</span> stu_detail<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="åŠ å¯†è§†å›¾"><a href="#åŠ å¯†è§†å›¾" class="header-anchor">#</a> åŠ å¯†è§†å›¾</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- åˆ›å»ºèƒ½å¤ŸæŸ¥è¯¢customersè¡¨ä¸­å§“åå’Œå¹´é¾„çš„åŠ å¯†è§†å›¾</span>
<span class="token keyword">create</span> <span class="token keyword">view</span> stu_encry <span class="token keyword">with</span> encryption
<span class="token keyword">as</span>
<span class="token keyword">select</span> name<span class="token punctuation">,</span>age
<span class="token keyword">from</span> customers<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="é€šè¿‡è§†å›¾æŸ¥è¯¢æ•°æ®"><a href="#é€šè¿‡è§†å›¾æŸ¥è¯¢æ•°æ®" class="header-anchor">#</a> é€šè¿‡è§†å›¾æŸ¥è¯¢æ•°æ®</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> customers_view<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>æŸ¥è¯¢ç»“æœ</p></blockquote> <div class="language- extra-class"><pre><code>+----------+-----+
| name     | age |
+----------+-----+
| Ramesh   |  32 |
| Khilan   |  25 |
| kaushik  |  23 |
| Chaitali |  25 |
| Hardik   |  27 |
| Komal    |  22 |
| Muffy    |  24 |
+----------+-----+
</code></pre></div><h3 id="é€šè¿‡è§†å›¾ä¿®æ”¹æ•°æ®"><a href="#é€šè¿‡è§†å›¾ä¿®æ”¹æ•°æ®" class="header-anchor">#</a> é€šè¿‡è§†å›¾ä¿®æ”¹æ•°æ®</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- å‘customers_viewä¸­æ‰‹åŠ¨æ·»åŠ ä¸€ä¸ªæ–°çš„è®°å½•</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> customers_view
<span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'jason'</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- æ›´æ–°customers_viewä¸­çš„æŸæ®µè®°å½•</span>
<span class="token keyword">update</span> customers_view
<span class="token keyword">set</span> name <span class="token operator">=</span> <span class="token string">'muffy'</span>
<span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">'yffum'</span><span class="token punctuation">;</span>

<span class="token comment">-- åˆ é™¤customers_viewä¸­çš„æŸæ®µè®°å½•</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> customers_view
<span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">'Komal'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="æŸ¥çœ‹å’Œé‡å‘½åè§†å›¾"><a href="#æŸ¥çœ‹å’Œé‡å‘½åè§†å›¾" class="header-anchor">#</a> æŸ¥çœ‹å’Œé‡å‘½åè§†å›¾</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- ä½¿ç”¨sp_helptextå­˜å‚¨è¿‡ç¨‹æŸ¥çœ‹name_viewè§†å›¾çš„å®šä¹‰ä¿¡æ¯</span>
<span class="token keyword">exec</span> sp_helptext <span class="token string">'sql.stu.name_view'</span><span class="token punctuation">;</span>

<span class="token comment">-- æŠŠè§†å›¾name_viewé‡å‘½åä¸ºxingming_view</span>
sp_rename name_view<span class="token punctuation">,</span>xingming_view<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="ä¿®æ”¹å’Œåˆ é™¤è§†å›¾"><a href="#ä¿®æ”¹å’Œåˆ é™¤è§†å›¾" class="header-anchor">#</a> ä¿®æ”¹å’Œåˆ é™¤è§†å›¾</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- ä¿®æ”¹ä¸Šé¢åˆ›å»ºçš„customers_viewï¼Œä½¿å…¶æ˜¾ç¤ºæ‰€æœ‰å­—æ®µ</span>
<span class="token keyword">alter</span> <span class="token keyword">view</span> customers_view
<span class="token keyword">as</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> customers<span class="token punctuation">;</span>

<span class="token comment">-- åˆ é™¤åˆ›å»ºçš„è§†å›¾</span>
<span class="token keyword">drop</span> <span class="token keyword">view</span> customers_view<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="header-anchor">#</a> å‡½æ•°</h2> <h3 id="åˆ›å»ºå’Œè°ƒç”¨å‡½æ•°"><a href="#åˆ›å»ºå’Œè°ƒç”¨å‡½æ•°" class="header-anchor">#</a> åˆ›å»ºå’Œè°ƒç”¨å‡½æ•°</h3> <h4 id="åˆ›å»ºå’Œè°ƒç”¨æ ‡é‡å‡½æ•°"><a href="#åˆ›å»ºå’Œè°ƒç”¨æ ‡é‡å‡½æ•°" class="header-anchor">#</a> åˆ›å»ºå’Œè°ƒç”¨æ ‡é‡å‡½æ•°</h4> <blockquote><p>sql serverçš„æ ‡é‡å‡½æ•°ä¼šæ¥æ”¶nä¸ªå‚æ•°å¹¶è¿”å›<strong>å•ä¸ª</strong>å€¼ã€‚å¦‚æœå•ç‹¬printè°ƒç”¨å‡½æ•°æœ€ç»ˆä¼šåœ¨æ‰“å°ç»“æœä¸Šæ˜¾ç¤º<strong>æ— åˆ—å</strong>ã€‚</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- ç°æœ‰ä¸€å¼ äº§å“è´­ä¹°è®°å½•è¡¨ï¼Œè®¾è®¡ä¸€ä¸ªè‡ªå®šä¹‰å‡½æ•°ï¼Œè¾“å…¥äº§å“idï¼Œè¿”å›è¿™ä¸ªäº§å“çš„è´­ä¹°æ•°é‡ã€‚</span>
<span class="token keyword">create</span> <span class="token keyword">function</span> dbo<span class="token punctuation">.</span>count_products<span class="token punctuation">(</span>@ product_id <span class="token keyword">int</span><span class="token punctuation">)</span>
<span class="token keyword">return</span> <span class="token keyword">int</span>
<span class="token keyword">as</span>
<span class="token keyword">begin</span>
<span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dbo<span class="token punctuation">.</span>products
    <span class="token keyword">where</span> id <span class="token operator">=</span> @ product_id
<span class="token punctuation">)</span>
<span class="token keyword">end</span>

<span class="token comment">-- è°ƒç”¨åˆšæ‰åˆ›å»ºçš„å‡½æ•°</span>
<span class="token keyword">print</span> <span class="token string">'idå·ä¸º3çš„äº§å“è´­ä¹°äº†'</span><span class="token operator">+</span> <span class="token keyword">convert</span><span class="token punctuation">(</span><span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>dbo<span class="token punctuation">.</span>count_products<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'ç§'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- è¿™é‡Œåœ¨æ‰“å°çš„æ—¶å€™éœ€è¦é€šè¿‡convertå‡½æ•°å°†ç±»å‹è½¬æ¢ä¸€ä¸‹ã€‚</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="åˆ›å»ºå’Œè°ƒç”¨å†…è”è¡¨å€¼å‡½æ•°"><a href="#åˆ›å»ºå’Œè°ƒç”¨å†…è”è¡¨å€¼å‡½æ•°" class="header-anchor">#</a> åˆ›å»ºå’Œè°ƒç”¨å†…è”è¡¨å€¼å‡½æ•°</h4> <blockquote><p>è¡¨å€¼å‡½æ•°æœ€ç»ˆè¿”å›çš„æ˜¯è¡¨ç±»å‹çš„æ•°æ®</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- åˆ›å»ºè¡¨å€¼å‡½æ•°ï¼Œè¯¥å‡½æ•°æ ¹æ®äº§å“å¹´ä»½è¿”å›äº§å“ä¿¡æ¯ï¼ŒåŒ…æ‹¬äº§å“åç§°ï¼Œå¹´ä»½å’Œä»·æ ¼ã€‚</span>
<span class="token keyword">create</span> <span class="token keyword">function</span> udfProductInyear<span class="token punctuation">(</span><span class="token variable">@year</span> <span class="token keyword">int</span><span class="token punctuation">)</span>
<span class="token keyword">returns</span> <span class="token keyword">table</span>
<span class="token keyword">as</span>
<span class="token keyword">return</span>
    <span class="token keyword">select</span> name<span class="token punctuation">,</span><span class="token keyword">year</span><span class="token punctuation">,</span>price <span class="token keyword">from</span> dbo<span class="token punctuation">.</span>products
    <span class="token keyword">where</span>
    <span class="token keyword">year</span> <span class="token operator">=</span> <span class="token variable">@year</span><span class="token punctuation">;</span>
<span class="token comment">-- æ‰§è¡Œä¸Šé¢åˆ›å»ºçš„å‡½æ•°</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> udfProductInyear<span class="token punctuation">(</span><span class="token number">2017</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p>æ‰§è¡Œç»“æœ</p></blockquote> <p><img src="https://www.yiibai.com/uploads/article/2019/02/26/143638_86640.png" alt=""></p> <h4 id="å¤šè¯­å¥è¡¨å€¼å‡½æ•°"><a href="#å¤šè¯­å¥è¡¨å€¼å‡½æ•°" class="header-anchor">#</a> å¤šè¯­å¥è¡¨å€¼å‡½æ•°</h4> <blockquote><p>å¤šè¯­å¥è¡¨å€¼å‡½æ•°å¯ä»¥åœ¨å‡½æ•°å†…æ‰§è¡Œå¤šä¸ªæŸ¥è¯¢å¹¶å°†ç»“æœèšåˆåˆ°æŸ¥è¯¢çš„è¡¨ä¸­ã€‚</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- ä¸‹é¢çš„å‡½æ•°ä¼šå°†å‘˜å·¥å’Œå®¢æˆ·åˆå¹¶åˆ°åŒä¸€å¼ è”ç³»äººè¡¨ä¸­</span>
<span class="token keyword">create</span> <span class="token keyword">function</span> udfContacts<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token variable">@contacts</span> <span class="token keyword">table</span><span class="token punctuation">(</span>
        first_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        last_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        email <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        phone <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">as</span>
    <span class="token keyword">begin</span>
    <span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token variable">@contacts</span>
    <span class="token keyword">select</span> 
        first_name<span class="token punctuation">,</span> 
        last_name<span class="token punctuation">,</span> 
        email<span class="token punctuation">,</span> 
        phone<span class="token punctuation">,</span>
        <span class="token string">'Staff'</span>
    <span class="token keyword">from</span>
        sales<span class="token punctuation">.</span>staffs<span class="token punctuation">;</span>

    <span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token variable">@contacts</span>
    <span class="token keyword">select</span> 
        first_name<span class="token punctuation">,</span> 
        last_name<span class="token punctuation">,</span> 
        email<span class="token punctuation">,</span> 
        phone<span class="token punctuation">,</span>
        <span class="token string">'Customer'</span>
    <span class="token keyword">from</span>
        sales<span class="token punctuation">.</span>customers<span class="token punctuation">;</span>
    <span class="token keyword">return</span>
    <span class="token keyword">end</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h3 id="ç®¡ç†ç”¨æˆ·å®šä¹‰å‡½æ•°"><a href="#ç®¡ç†ç”¨æˆ·å®šä¹‰å‡½æ•°" class="header-anchor">#</a> ç®¡ç†ç”¨æˆ·å®šä¹‰å‡½æ•°</h3> <h4 id="æŸ¥çœ‹ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°"><a href="#æŸ¥çœ‹ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°" class="header-anchor">#</a> æŸ¥çœ‹ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>sp_helptext å‡½æ•°å
<span class="token comment">-- å¯ç”¨æ¥æŸ¥çœ‹ç”¨æˆ·å®šä¹‰å‡½æ•°çš„æ–‡æœ¬ä¿¡æ¯</span>
sp_help å‡½æ•°å
<span class="token comment">-- å¯ç”¨æ¥æŸ¥çœ‹ç”¨æˆ·å®šä¹‰å‡½æ•°çš„ä¸€èˆ¬ä¿¡æ¯</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="åˆ é™¤ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°"><a href="#åˆ é™¤ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°" class="header-anchor">#</a> åˆ é™¤ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- åˆ é™¤ä¸Šé¢åˆ›å»ºçš„å‡½æ•°</span>
<span class="token keyword">drop</span> <span class="token keyword">function</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> udfContacts<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="æ¸¸æ ‡"><a href="#æ¸¸æ ‡" class="header-anchor">#</a> æ¸¸æ ‡</h2> <blockquote><p>æœ‰æ—¶å€™éœ€è¦æˆ‘ä»¬ä»ç»“æœä¸­å–ä¸€æ¡æ¡çš„è®°å½•ï¼Œæ­¤æ—¶ä½¿ç”¨æ¸¸æ ‡å°±ä¼šå¾ˆæœ‰å¸®åŠ©</p></blockquote> <h3 id="å£°æ˜æ¸¸æ ‡"><a href="#å£°æ˜æ¸¸æ ‡" class="header-anchor">#</a> å£°æ˜æ¸¸æ ‡</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- å£°æ˜ä¸€ä¸ªæ ‡å‡†æ¸¸æ ‡</span>
<span class="token keyword">declare</span> stu_cursor <span class="token keyword">cursor</span> <span class="token keyword">for</span>
<span class="token keyword">select</span> id <span class="token keyword">from</span> stu<span class="token punctuation">;</span>

<span class="token comment">-- å£°æ˜ä¸€ä¸ªåªè¯»æ¸¸æ ‡</span>
<span class="token keyword">declare</span> stu_cursor <span class="token keyword">cursor</span> <span class="token keyword">for</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu <span class="token keyword">for</span> <span class="token keyword">read</span> only<span class="token punctuation">;</span>

<span class="token comment">-- å£°æ˜ä¸€ä¸ªå¯æ›´æ–°æ¸¸æ ‡</span>
<span class="token keyword">declare</span> stu_cursor <span class="token keyword">cursor</span> <span class="token keyword">for</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu <span class="token keyword">for</span> <span class="token keyword">update</span><span class="token punctuation">;</span>

<span class="token comment">-- å£°æ˜ä¸€ä¸ªåŠ¨æ€æ¸¸æ ‡</span>
<span class="token keyword">declare</span> stu_cursor CURSORScroll <span class="token keyword">for</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="æ‰“å¼€æ¸¸æ ‡"><a href="#æ‰“å¼€æ¸¸æ ‡" class="header-anchor">#</a> æ‰“å¼€æ¸¸æ ‡</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">open</span> stu_cursor<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="è¯»å–æ¸¸æ ‡æ•°æ®"><a href="#è¯»å–æ¸¸æ ‡æ•°æ®" class="header-anchor">#</a> è¯»å–æ¸¸æ ‡æ•°æ®</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- è¯»å–ç¬¬ä¸€è¡Œçš„æ•°æ®ï¼Œå¹¶å°†æ¸¸æ ‡æ”¾åˆ°ç¬¬ä¸€è¡Œ</span>
<span class="token keyword">fetch</span> <span class="token keyword">first</span> <span class="token keyword">from</span> stu_cursor<span class="token punctuation">;</span>

<span class="token comment">-- è¯»å–ä»å½“å‰è¡Œå¼€å§‹çš„ç¬¬3è¡Œ</span>
<span class="token keyword">fetch</span> relative <span class="token number">3</span> <span class="token keyword">from</span> stu_cursor<span class="token punctuation">;</span>

<span class="token comment">-- è¯»å–å½“å‰è¡Œçš„ä¸‹ä¸€è¡Œæ•°æ®</span>
<span class="token keyword">fetch</span> <span class="token keyword">next</span> <span class="token keyword">from</span> stu_cursor<span class="token punctuation">;</span>

<span class="token comment">-- è¯»å–ç¬¬å››è¡Œçš„æ•°æ®</span>
<span class="token keyword">fetch</span> absolute <span class="token number">4</span> <span class="token keyword">from</span> stu_cursor<span class="token punctuation">;</span>

<span class="token comment">-- è¯»å–æœ€åä¸€è¡Œçš„æ•°æ®ï¼Œå¹¶å°†æ¸¸æ ‡æ”¾åˆ°æœ€åä¸€è¡Œ</span>
<span class="token keyword">fetch</span> <span class="token keyword">last</span> <span class="token keyword">from</span> stu_cursor<span class="token punctuation">;</span>

<span class="token comment">-- å–å‡ºstu_cursorçš„æ•°æ®ï¼Œå¹¶ä¿å­˜åˆ°å˜é‡ä¸­</span>
<span class="token keyword">declare</span> <span class="token variable">@stu_id</span> nvarchar<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">fetch</span> <span class="token keyword">first</span> <span class="token keyword">from</span> stu_cursor <span class="token keyword">into</span> <span class="token variable">@stu_id</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="ç”¨æ¸¸æ ‡ä¿®æ”¹å’Œåˆ é™¤æ•°æ®"><a href="#ç”¨æ¸¸æ ‡ä¿®æ”¹å’Œåˆ é™¤æ•°æ®" class="header-anchor">#</a> ç”¨æ¸¸æ ‡ä¿®æ”¹å’Œåˆ é™¤æ•°æ®</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- é€šè¿‡æ¸¸æ ‡ä¿®æ”¹å½“å‰è¡Œæ•°æ®</span>
<span class="token keyword">update</span> stu <span class="token keyword">set</span> name <span class="token operator">=</span> <span class="token string">'jason'</span> <span class="token keyword">where</span> <span class="token keyword">current</span> <span class="token keyword">of</span> stu_cursor<span class="token punctuation">;</span>

<span class="token comment">-- é€šè¿‡æ¸¸æ ‡åˆ é™¤å½“å‰æ•°æ®</span>
<span class="token keyword">delete</span> stu <span class="token keyword">where</span> <span class="token keyword">current</span> <span class="token keyword">of</span> stu_cursor<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="å…³é—­å’Œåˆ é™¤æ¸¸æ ‡"><a href="#å…³é—­å’Œåˆ é™¤æ¸¸æ ‡" class="header-anchor">#</a> å…³é—­å’Œåˆ é™¤æ¸¸æ ‡</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- å…³é—­æ¸¸æ ‡</span>
<span class="token keyword">close</span> stu_cursor<span class="token punctuation">;</span>

<span class="token comment">-- åˆ é™¤æ¸¸æ ‡</span>
<span class="token keyword">deallocate</span> stu_cursor<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="header-anchor">#</a> äº‹åŠ¡</h2> <blockquote><p>äº‹åŠ¡æ˜¯åœ¨æ•°æ®åº“ä¸ŠæŒ‰ç…§ä¸€å®šé€»è¾‘é¡ºåºæ‰§è¡Œçš„ä»»åŠ¡é˜Ÿåˆ—ï¼Œå…·æœ‰ä¸å¯åˆ†å‰²æ€§ã€‚ä¸€æ—¦æ“ä½œå¤±è´¥ï¼Œå°±ä¼šå›æ»šåˆ°æ“ä½œå‰çš„çŠ¶æ€ã€‚</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- å‡è®¾ç°åœ¨è¦è¿›è¡Œä¸¤ä¸ªæ“ä½œï¼Œè¿™ä¸¤ä¸ªæ“ä½œè¦è¢«çœ‹åšæ˜¯ä¸€ä¸ªæ•´ä½“çš„äº‹åŠ¡ï¼Œä¸€æ—¦æœ‰ä¸€ä¸ªæ“ä½œå¤±è´¥ï¼Œåˆ™å›æ»šåˆ°ä¹‹å‰çš„çŠ¶æ€ã€‚</span>
<span class="token keyword">begin</span> try
    <span class="token keyword">begin</span> <span class="token keyword">tran</span> <span class="token comment">--è®¾ç½®äº‹åŠ¡çš„æ¢å¤ç‚¹</span>
    <span class="token keyword">delete</span> <span class="token keyword">from</span> stu <span class="token keyword">where</span> age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>
    <span class="token keyword">delete</span> <span class="token keyword">from</span> stu <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">'jason'</span><span class="token punctuation">;</span>
    <span class="token keyword">commit</span> <span class="token keyword">tran</span> <span class="token comment">--å¦‚æœéƒ½æˆåŠŸï¼Œå°±æäº¤äº‹åŠ¡</span>
<span class="token keyword">end</span> try

<span class="token keyword">begin</span> catch
    <span class="token keyword">rollback</span> <span class="token keyword">tran</span> <span class="token comment">-- ä¸€æ—¦å¤±è´¥æŠ¥å¼‚å¸¸å°±å›æ»š</span>
<span class="token keyword">end</span> catch
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="å­˜å‚¨è¿‡ç¨‹"><a href="#å­˜å‚¨è¿‡ç¨‹" class="header-anchor">#</a> å­˜å‚¨è¿‡ç¨‹</h2> <blockquote><p>å­˜å‚¨è¿‡ç¨‹ç®€å•æ¥è¯´å°±æ˜¯å°è£…å¥½çš„ä¸€æ®µsqlè¯­å¥ï¼Œå…¶ä¸­æœ‰äº›å­˜å‚¨è¿‡ç¨‹åƒç³»ç»Ÿè‡ªå¸¦çš„å‡½æ•°ä¸€æ ·å·²ç»è¢«å°è£…å¥½äº†ã€‚
å­˜å‚¨è¿‡ç¨‹ç›¸å¯¹äºå‡½æ•°è€Œè¨€æ“ä½œæƒé™æ›´é«˜ï¼ŒåŠŸèƒ½ä¹Ÿæ›´ä¸ºå¤æ‚ï¼Œå‡½æ•°å®ç°çš„åŠŸèƒ½é’ˆå¯¹æ€§è¦æ›´å¼ºä¸€äº›ã€‚</p></blockquote> <h3 id="å­˜å‚¨è¿‡ç¨‹åˆ›å»º"><a href="#å­˜å‚¨è¿‡ç¨‹åˆ›å»º" class="header-anchor">#</a> å­˜å‚¨è¿‡ç¨‹åˆ›å»º</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- åˆ›å»ºä¸€ä¸ªç®€å•çš„å­˜å‚¨è¿‡ç¨‹p1,æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿä¿¡æ¯ï¼Œå¹¶æŒ‰ç…§æˆç»©çš„é™åºæ’åˆ— </span>
<span class="token keyword">create</span> <span class="token keyword">proc</span> p1
<span class="token keyword">as</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu <span class="token keyword">order</span> <span class="token keyword">by</span> score <span class="token keyword">desc</span><span class="token punctuation">;</span>

<span class="token comment">-- åˆ›å»ºå­˜å‚¨è¿‡ç¨‹p2,æŸ¥è¯¢æŒ‡å®šè¯¾ç¨‹å·çš„å­¦ç”Ÿä¿¡æ¯.</span>
<span class="token keyword">create</span> <span class="token keyword">proc</span> p2
<span class="token variable">@course_id</span> <span class="token keyword">int</span>  <span class="token comment">--å¤–éƒ¨å‚æ•°</span>
<span class="token keyword">as</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu <span class="token keyword">where</span> course_id <span class="token operator">=</span> <span class="token variable">@course_id</span>

<span class="token comment">-- åˆ›å»ºå­˜å‚¨è¿‡ç¨‹p3ï¼ŒæŸ¥è¯¢æŒ‡å®šå­¦å·å­¦ç”Ÿçš„è‹±è¯­æˆç»©å¹¶è¿”å›ã€‚</span>
<span class="token keyword">create</span> <span class="token keyword">proc</span> p3
<span class="token variable">@stu_id</span> <span class="token keyword">int</span><span class="token punctuation">,</span><span class="token variable">@english_score</span> <span class="token keyword">int</span> output
<span class="token keyword">as</span>
<span class="token keyword">select</span> english_score <span class="token keyword">from</span> stu <span class="token keyword">where</span> stu_id <span class="token operator">=</span> <span class="token variable">@stu_id</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="å­˜å‚¨è¿‡ç¨‹æ‰§è¡Œ"><a href="#å­˜å‚¨è¿‡ç¨‹æ‰§è¡Œ" class="header-anchor">#</a> å­˜å‚¨è¿‡ç¨‹æ‰§è¡Œ</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- æ‰§è¡Œp1</span>
<span class="token keyword">exec</span> p1<span class="token punctuation">;</span>

<span class="token comment">-- æ‰§è¡Œp2</span>
<span class="token keyword">exec</span> p2 <span class="token number">002</span><span class="token punctuation">;</span>

<span class="token comment">-- æ‰§è¡Œp3</span>
<span class="token keyword">declare</span> <span class="token variable">@tmp</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- æŒ‡å®šæ—¶è¦æŠŠè¿”å›å€¼ä¿å­˜åˆ°å˜é‡ä¸­ã€‚</span>
<span class="token keyword">exec</span> p3 <span class="token number">002</span><span class="token punctuation">,</span><span class="token variable">@tmp</span> output<span class="token punctuation">;</span> 
<span class="token keyword">print</span> <span class="token string">'è‹±è¯­æˆç»©ä¸º'</span><span class="token operator">+</span> <span class="token variable">@tmp</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="åˆ é™¤å­˜å‚¨è¿‡ç¨‹"><a href="#åˆ é™¤å­˜å‚¨è¿‡ç¨‹" class="header-anchor">#</a> åˆ é™¤å­˜å‚¨è¿‡ç¨‹</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">proc</span> p1<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="è§¦å‘å™¨"><a href="#è§¦å‘å™¨" class="header-anchor">#</a> è§¦å‘å™¨</h2> <blockquote><p>è§¦å‘å™¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„å­˜å‚¨è¿‡ç¨‹ï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨çš„å“åº”æ•°æ®åº“çš„æŸäº›å˜åŠ¨ã€‚</p></blockquote> <h3 id="dmlè§¦å‘å™¨"><a href="#dmlè§¦å‘å™¨" class="header-anchor">#</a> DMLè§¦å‘å™¨</h3> <blockquote><p>æ•°æ®æ“ä½œè¯­è¨€è§¦å‘å™¨ï¼Œç”¨äºå“åº”è¡¨ä¸­çš„insertï¼Œdeleteï¼Œupdateäº‹ä»¶ã€‚</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- åˆ›å»ºä¸€ä¸ªå…³äºå­¦ç”Ÿè¡¨çš„è§¦å‘å™¨ï¼Œä¸€æ—¦è¦å˜æ›´å­¦ç”Ÿè¡¨çš„å†…å®¹æ—¶ï¼Œå°±æ‰§è¡Œå›æ»šæ“ä½œã€‚</span>
<span class="token keyword">create</span> <span class="token keyword">trigger</span> tr1 <span class="token keyword">on</span> stu <span class="token keyword">after</span> <span class="token keyword">delete</span><span class="token punctuation">,</span><span class="token keyword">insert</span><span class="token punctuation">,</span><span class="token keyword">update</span>
<span class="token keyword">as</span>
<span class="token keyword">rollback</span> <span class="token keyword">tran</span>
<span class="token keyword">print</span><span class="token string">'å­¦ç”Ÿè¡¨çš„å†…å®¹ä¸èƒ½åŠ¨!'</span>
<span class="token comment">-- afterçš„ä½ç½®å¦‚æœæ¢æˆäº†insted ofå°±æˆäº†æ›¿ä»£è§¦å‘å™¨</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="ddlè§¦å‘å™¨"><a href="#ddlè§¦å‘å™¨" class="header-anchor">#</a> DDLè§¦å‘å™¨</h3> <blockquote><p>æ•°æ®å®šä¹‰è¯­è¨€è§¦å‘å™¨,ç”¨äºå“åº”è¡¨ä¸­çš„create,alter,dropäº‹ä»¶ã€‚</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- åœ¨schoolæ•°æ®åº“ä¸­åˆ›å»ºä¸€ä¸ªDDLè§¦å‘å™¨,ç”¨æ¥é˜²æ­¢è¯¥æ•°æ®åº“ä¸­çš„ä»»ä¸€è¡¨è¢«ä¿®æ”¹æˆ–åˆ é™¤</span>
<span class="token keyword">use</span> school
go
<span class="token keyword">create</span> <span class="token keyword">trigger</span> tr2 <span class="token keyword">on</span> <span class="token keyword">database</span> <span class="token keyword">after</span> drop_table<span class="token punctuation">,</span>alter_table
<span class="token keyword">as</span>
<span class="token keyword">begin</span> 
<span class="token keyword">raiserror</span><span class="token punctuation">(</span><span class="token string">'ä¸èƒ½ä¿®æ”¹è¡¨ç»“æ„'</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">rollback</span>
<span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="ç®¡ç†è§¦å‘å™¨"><a href="#ç®¡ç†è§¦å‘å™¨" class="header-anchor">#</a> ç®¡ç†è§¦å‘å™¨</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- æŸ¥çœ‹ç”¨æˆ·åˆ›å»ºçš„è§¦å‘å™¨,å’Œå­˜å‚¨è¿‡ç¨‹çš„æ“ä½œæ˜¯ä¸€æ ·çš„</span>
<span class="token keyword">exec</span> sp_help è§¦å‘å™¨å
<span class="token keyword">exec</span> sp_helptext è§¦å‘å™¨å
<span class="token keyword">exec</span> sp_depends è§¦å‘å™¨å <span class="token comment">--ç”¨äºæ˜¾ç¤ºå’Œè§¦å‘å™¨ç›¸å…³çš„æ•°æ®åº“å¯¹è±¡</span>

<span class="token comment">-- åˆ é™¤è§¦å‘å™¨</span>
<span class="token keyword">drop</span> <span class="token keyword">trigger</span> è§¦å‘å™¨å

<span class="token comment">-- ç¦ç”¨è§¦å‘å™¨</span>
<span class="token keyword">disable</span> <span class="token keyword">trigger</span> è§¦å‘å™¨å <span class="token keyword">on</span> è¡¨å <span class="token comment">--ç¦ç”¨å¯¹è¡¨çš„DMLè§¦å‘å™¨</span>
<span class="token keyword">disable</span> <span class="token keyword">trigger</span> è§¦å‘å™¨å <span class="token keyword">on</span> <span class="token keyword">database</span> <span class="token comment">--ç¦ç”¨DDLè§¦å‘å™¨</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></div> <footer class="page-edit" style="display:none;"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">4/22/2021, 5:42:12 PM</span></div></footer> <!----> <!----></main> <!----></div></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.4d15b3ce.js" defer></script><script src="/assets/js/3.8b0ceda2.js" defer></script><script src="/assets/js/1.ecdf2037.js" defer></script><script src="/assets/js/55.ec8677c2.js" defer></script>
  </body>
</html>
