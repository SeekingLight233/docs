<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>重学前端小记-网络之传输层 | SeekingLight</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="赋时光以生命">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.78041c82.css" as="style"><link rel="preload" href="/assets/js/app.553bbeff.js" as="script"><link rel="preload" href="/assets/js/3.8b0ceda2.js" as="script"><link rel="preload" href="/assets/js/1.ecdf2037.js" as="script"><link rel="preload" href="/assets/js/18.03b83e63.js" as="script"><link rel="prefetch" href="/assets/js/10.3bef70b4.js"><link rel="prefetch" href="/assets/js/11.78df7688.js"><link rel="prefetch" href="/assets/js/12.696f5caa.js"><link rel="prefetch" href="/assets/js/13.54bec18e.js"><link rel="prefetch" href="/assets/js/14.21b086e6.js"><link rel="prefetch" href="/assets/js/15.b0b83d30.js"><link rel="prefetch" href="/assets/js/16.83abebf4.js"><link rel="prefetch" href="/assets/js/17.b3315a17.js"><link rel="prefetch" href="/assets/js/19.62e15641.js"><link rel="prefetch" href="/assets/js/20.5ac2db20.js"><link rel="prefetch" href="/assets/js/21.9d47ff64.js"><link rel="prefetch" href="/assets/js/22.c2c8deb3.js"><link rel="prefetch" href="/assets/js/23.2a8c378f.js"><link rel="prefetch" href="/assets/js/24.96dae278.js"><link rel="prefetch" href="/assets/js/25.49026790.js"><link rel="prefetch" href="/assets/js/26.47a2cc9e.js"><link rel="prefetch" href="/assets/js/27.f5c76e77.js"><link rel="prefetch" href="/assets/js/28.b7ef27e5.js"><link rel="prefetch" href="/assets/js/29.953abd8d.js"><link rel="prefetch" href="/assets/js/30.ad93b421.js"><link rel="prefetch" href="/assets/js/31.045b911d.js"><link rel="prefetch" href="/assets/js/32.bc180bcb.js"><link rel="prefetch" href="/assets/js/33.1f25abf9.js"><link rel="prefetch" href="/assets/js/34.b209ec61.js"><link rel="prefetch" href="/assets/js/35.52b985ff.js"><link rel="prefetch" href="/assets/js/36.00932a75.js"><link rel="prefetch" href="/assets/js/37.af4874ea.js"><link rel="prefetch" href="/assets/js/38.2fb289d5.js"><link rel="prefetch" href="/assets/js/39.709f68e9.js"><link rel="prefetch" href="/assets/js/4.ff412fc0.js"><link rel="prefetch" href="/assets/js/40.5618cfb3.js"><link rel="prefetch" href="/assets/js/41.821c91e8.js"><link rel="prefetch" href="/assets/js/42.9500e889.js"><link rel="prefetch" href="/assets/js/43.bf2a80ac.js"><link rel="prefetch" href="/assets/js/44.f6b0d30f.js"><link rel="prefetch" href="/assets/js/45.36a4d9f4.js"><link rel="prefetch" href="/assets/js/46.b8b61cac.js"><link rel="prefetch" href="/assets/js/47.aff5ab88.js"><link rel="prefetch" href="/assets/js/48.a52b3f5e.js"><link rel="prefetch" href="/assets/js/49.b40c85c3.js"><link rel="prefetch" href="/assets/js/5.ed86cd32.js"><link rel="prefetch" href="/assets/js/50.3719e3db.js"><link rel="prefetch" href="/assets/js/51.c7b2ba80.js"><link rel="prefetch" href="/assets/js/52.f7a22af6.js"><link rel="prefetch" href="/assets/js/53.c35ca719.js"><link rel="prefetch" href="/assets/js/54.239baec0.js"><link rel="prefetch" href="/assets/js/55.cab062a1.js"><link rel="prefetch" href="/assets/js/56.6491b627.js"><link rel="prefetch" href="/assets/js/57.5b84cdd0.js"><link rel="prefetch" href="/assets/js/58.5e753a27.js"><link rel="prefetch" href="/assets/js/59.04a219d8.js"><link rel="prefetch" href="/assets/js/6.fed70d28.js"><link rel="prefetch" href="/assets/js/60.b49e4584.js"><link rel="prefetch" href="/assets/js/61.86730a60.js"><link rel="prefetch" href="/assets/js/7.82b75197.js"><link rel="prefetch" href="/assets/js/8.a79a379f.js"><link rel="prefetch" href="/assets/js/9.ef68ce12.js">
    <link rel="stylesheet" href="/assets/css/0.styles.78041c82.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-19557b78><div data-v-19557b78><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-19557b78 data-v-19557b78><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-64685f0e data-v-19557b78 data-v-19557b78><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>SeekingLight</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>寻光</span>
            
          <span data-v-64685f0e>2017 - </span>
          2022
        </a></span></div></div> <div class="hide" data-v-19557b78><header class="navbar" data-v-19557b78><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/icon.png" alt="SeekingLight" class="logo"> <span class="site-name">SeekingLight</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/计算机组成原理/" class="nav-link"><i class="iconfont undefined"></i>
  计算机组成原理
</a></li><li class="dropdown-item"><!----> <a href="/categories/杂记/" class="nav-link"><i class="iconfont undefined"></i>
  杂记
</a></li><li class="dropdown-item"><!----> <a href="/categories/前端/" class="nav-link"><i class="iconfont undefined"></i>
  前端
</a></li><li class="dropdown-item"><!----> <a href="/categories/Typescript/" class="nav-link"><i class="iconfont undefined"></i>
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/categories/后端/" class="nav-link"><i class="iconfont undefined"></i>
  后端
</a></li><li class="dropdown-item"><!----> <a href="/categories/算法/" class="nav-link"><i class="iconfont undefined"></i>
  算法
</a></li><li class="dropdown-item"><!----> <a href="/categories/计算机网络/" class="nav-link"><i class="iconfont undefined"></i>
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/categories/操作系统/" class="nav-link"><i class="iconfont undefined"></i>
  操作系统
</a></li><li class="dropdown-item"><!----> <a href="/categories/编程范式/" class="nav-link"><i class="iconfont undefined"></i>
  编程范式
</a></li><li class="dropdown-item"><!----> <a href="/categories/色彩空间/" class="nav-link"><i class="iconfont undefined"></i>
  色彩空间
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      关于
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/SeekingLight233" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://space.bilibili.com/37019841?from=search&amp;seid=11160746842115235145" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-bilibili"></i>
  BiliBili
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://music.163.com/#/user/home?id=355059838" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-douyin"></i>
  网易云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/contact.html" class="nav-link"><i class="iconfont reco-wechat"></i>
  联系我
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-19557b78></div> <aside class="sidebar" data-v-19557b78><div class="personal-info-wrapper" data-v-042e23d4><img src="/images/hero.png" alt="author-avatar" class="personal-img" data-v-042e23d4> <h3 class="name" data-v-042e23d4>
    寻光
  </h3> <div class="num" data-v-042e23d4><div data-v-042e23d4><h3 data-v-042e23d4>47</h3> <h6 data-v-042e23d4>Article</h6></div> <div data-v-042e23d4><h3 data-v-042e23d4>86</h3> <h6 data-v-042e23d4>Tag</h6></div></div> <hr data-v-042e23d4></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/计算机组成原理/" class="nav-link"><i class="iconfont undefined"></i>
  计算机组成原理
</a></li><li class="dropdown-item"><!----> <a href="/categories/杂记/" class="nav-link"><i class="iconfont undefined"></i>
  杂记
</a></li><li class="dropdown-item"><!----> <a href="/categories/前端/" class="nav-link"><i class="iconfont undefined"></i>
  前端
</a></li><li class="dropdown-item"><!----> <a href="/categories/Typescript/" class="nav-link"><i class="iconfont undefined"></i>
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/categories/后端/" class="nav-link"><i class="iconfont undefined"></i>
  后端
</a></li><li class="dropdown-item"><!----> <a href="/categories/算法/" class="nav-link"><i class="iconfont undefined"></i>
  算法
</a></li><li class="dropdown-item"><!----> <a href="/categories/计算机网络/" class="nav-link"><i class="iconfont undefined"></i>
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/categories/操作系统/" class="nav-link"><i class="iconfont undefined"></i>
  操作系统
</a></li><li class="dropdown-item"><!----> <a href="/categories/编程范式/" class="nav-link"><i class="iconfont undefined"></i>
  编程范式
</a></li><li class="dropdown-item"><!----> <a href="/categories/色彩空间/" class="nav-link"><i class="iconfont undefined"></i>
  色彩空间
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      关于
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/SeekingLight233" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://space.bilibili.com/37019841?from=search&amp;seid=11160746842115235145" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-bilibili"></i>
  BiliBili
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://music.163.com/#/user/home?id=355059838" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-douyin"></i>
  网易云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/contact.html" class="nav-link"><i class="iconfont reco-wechat"></i>
  联系我
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>重学前端小记-网络之传输层</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/note_net.html#服务器与应用层协议之间的关系" class="sidebar-link">服务器与应用层协议之间的关系</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/note_net.html#udp" class="sidebar-link">UDP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/note_net.html#头部结构" class="sidebar-link">头部结构</a></li><li class="sidebar-sub-header"><a href="/docs/note_net.html#特性" class="sidebar-link">特性</a></li><li class="sidebar-sub-header"><a href="/docs/note_net.html#适用场景" class="sidebar-link">适用场景</a></li></ul></li><li><a href="/docs/note_net.html#tcp" class="sidebar-link">TCP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/note_net.html#头部结构-2" class="sidebar-link">头部结构</a></li><li class="sidebar-sub-header"><a href="/docs/note_net.html#套接字" class="sidebar-link">套接字</a></li><li class="sidebar-sub-header"><a href="/docs/note_net.html#建立连接时的三次握手" class="sidebar-link">建立连接时的三次握手</a></li><li class="sidebar-sub-header"><a href="/docs/note_net.html#断开连接时的四次挥手" class="sidebar-link">断开连接时的四次挥手</a></li><li class="sidebar-sub-header"><a href="/docs/note_net.html#特性-2" class="sidebar-link">特性</a></li><li class="sidebar-sub-header"><a href="/docs/note_net.html#适用场景-2" class="sidebar-link">适用场景</a></li></ul></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-64685f0e data-v-19557b78><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>重学前端小记-网络之传输层</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>寻光</span>
            
          <span data-v-64685f0e>2017 - </span>
          2022
        </a></span></div></div> <div data-v-19557b78><main class="page"><div class="page-title" style="display:none;"><h1>重学前端小记-网络之传输层</h1> <hr> <div data-v-34ea29db><i class="iconfont reco-account" data-v-34ea29db><span data-v-34ea29db>寻光</span></i> <i class="iconfont reco-date" data-v-34ea29db><span data-v-34ea29db>2019-10-01</span></i> <!----> <i class="iconfont reco-tag tags" data-v-34ea29db><span class="tag-item" data-v-34ea29db>UDP</span><span class="tag-item" data-v-34ea29db>TCP</span><span class="tag-item" data-v-34ea29db>阻塞控制</span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><h2 id="服务器与应用层协议之间的关系"><a href="#服务器与应用层协议之间的关系" class="header-anchor">#</a> 服务器与应用层协议之间的关系</h2> <p>服务器端使用TCP或者UDP的端口侦听客户端请求</p> <p>客户端使用IP地址来定位主机，用目标的端口来定位服务。</p> <p>服务器网卡上可以设置开放的端口号，实现网络安全。</p> <h2 id="udp"><a href="#udp" class="header-anchor">#</a> UDP</h2> <h3 id="头部结构"><a href="#头部结构" class="header-anchor">#</a> 头部结构</h3> <p><img src="/assets/img/01.aacd023e.png" alt=""></p> <p>头部占8个字节，其中的每个字段都包含两个字节，分别包括源<strong>端口，目标端口，长度，校验和</strong>，同时还有12个字节的伪首部。</p> <p>PS：这张图是自顶向下中的，32比特的意思是结构的“宽度”是4个字节。</p> <h3 id="特性"><a href="#特性" class="header-anchor">#</a> 特性</h3> <ul><li>面向无连接：说白了就是想发就发，不管你有没有收到。</li> <li>不可靠性：既然想发就发，肯定就不可靠啦，网络一炸就掉包了</li> <li>高效：没TCP那么墨迹，它只需要保证数据发出去并且能有序到达就OK</li> <li>传输方式灵活：不但支持一对一，也可以支持一对多，多对多，多对一，想咋发就咋发。</li></ul> <h3 id="适用场景"><a href="#适用场景" class="header-anchor">#</a> 适用场景</h3> <ul><li>直播，视频通话</li> <li>对即时通讯要求高的网络游戏（LOL(MOBA)，彩6这种）</li></ul> <h2 id="tcp"><a href="#tcp" class="header-anchor">#</a> TCP</h2> <h3 id="头部结构-2"><a href="#头部结构-2" class="header-anchor">#</a> 头部结构</h3> <p><img src="/assets/img/02.5b7b572e.png" alt=""></p> <p>头部最少占20个字节，其中源端口号和目标端口号还是各占两个字节，校验和也是占两个字节，除此之外还包括：</p> <ul><li><p>序号：占4个字节 对每个字节流进行编号，如果序号为600，则说明这个数据包的第一个字节为600，最后一个字节就是600+数据包的长度</p></li> <li><p>确认号：4个字节，用来表示一个数据包的下一个字节的编号是多少，同时也表示本数据包已经送到，（暂时理解为当前数据包的最后一个字节的序号）</p></li> <li><p>窗口：两个字节，表示还能接受多少字节的数据，用于流量控制</p></li> <li><p>紧急数据指针：两个字节，指出紧急数据的位置，只有在URG为1时才有效</p> <p>这还没完，还有6bit的标识符</p> <ol><li>URG为1时，激活紧急数据指针</li> <li>ACK为1时，说明确认号字段（小ack）有效</li> <li>PSH为1时，表示接收端应该立即将数据 push 给应用层，而不是等到缓冲区满后再提交。</li> <li>RST为1，说明TCP连接有问题，要重新连</li> <li>SYN一般情况为1，配合ACK使用。当ACK为0时，说明当前包为连接请求。
当SYN为0，说明连接建立好了。</li> <li>FIN为1，表示数据已经发完了，并要求释放连接。</li></ol></li></ul> <h3 id="套接字"><a href="#套接字" class="header-anchor">#</a> 套接字</h3> <p>socket = (IP地址：端口号)
一个TCP连接由两个端点（两个套接字）来决定。</p> <h3 id="建立连接时的三次握手"><a href="#建立连接时的三次握手" class="header-anchor">#</a> 建立连接时的三次握手</h3> <p><img src="/assets/img/03.b2c69809.png" alt="03"></p> <ol><li><p>第一次握手，客户端向服务器发送<strong>连接请求报文</strong>，该报文段包含了一个自己的初始序号X。</p></li> <li><p>第二次握手，如果同意连接，服务器就会返回一个<strong>连接确认报文</strong>，该报文中也包含了一个初始序号Y。</p></li> <li><p>第三次握手，客户端还要再向服务器发送一个<strong>连接确认报文</strong>，此时的确认号是Y＋1，序号是X＋1，用来保证这次的连接确认报文的确是“关于”前两次握手的，如果没有这第三次握手，那么在网络出现阻塞时就会产生问题——一旦网络请求在网络中滞留的时间过长，客户端就会<strong>重新发一个请求</strong>。那之前发的请求怎么办？还停在网络中呢，之前的“作废请求”到达客户机只是一个时间问题。因此第三次握手是一个非常好的保证方式，保证客户端会忽略前两次握手，不然服务器会直接打开两个连接通道。</p> <p><strong>第三次握手后</strong>，连接通道打开。</p></li></ol> <h3 id="断开连接时的四次挥手"><a href="#断开连接时的四次挥手" class="header-anchor">#</a> 断开连接时的四次挥手</h3> <p><img src="/assets/img/04.845813c6.jpg" alt=""></p> <ol><li>第一次挥手，客户端发送<strong>连接释放请求</strong>。（FIN为1）</li> <li>第二次挥手，服务器收到请求，先往上告诉应用层“TCP要关了。。”接着给客户端返回一个ACK，再接着就进入了一个“半关闭”（CLOSE-WAIT）的状态，在这个状态中，B还是可以给A发送数据的。</li> <li>第三次挥手，此时数据应该是“彻底发完了”，服务器发送<strong>连接释放请求</strong>（FIN为1），并进入到**&quot;最后确认阶段&quot;（LAST－ACK）**</li> <li>第四次挥手，客户端受到连接释放请求后，会再向服务器发送一个ACK，告诉服务器“自己听到了它的连接释放请求”，当服务器收到这个ACK后，便会最终进入CLOSED状态。而客户端在发完ACK后便会进入到一个<strong>TIME－WAIT</strong>的状态，该状态会持续两个MSL（Maximum Segment Lifetime)。该状态的存在是为了防止另外一种情况：假设第四次挥手时的ACK在网络中滞留了，那么服务器就会在一定时间后<strong>重新发送连接释放请求</strong>，这2MSL的时间主要是为了等这玩意儿。</li></ol> <h3 id="特性-2"><a href="#特性-2" class="header-anchor">#</a> 特性</h3> <p>面向连接
点对点
可靠交付
全双工
面向字节流</p> <h4 id="传输可靠"><a href="#传输可靠" class="header-anchor">#</a> 传输可靠</h4> <h5 id="停止等待协议"><a href="#停止等待协议" class="header-anchor">#</a> 停止等待协议</h5> <p>（超时重传机制）保证了保证了数据可以准确送达。</p> <h5 id="滑动窗口"><a href="#滑动窗口" class="header-anchor">#</a> 滑动窗口</h5> <p>滑动窗口是TCP流量控制的具体实现。</p> <p><img src="/assets/img/05.849cebc0.png" alt=""></p> <p><img src="/assets/img/06.0f903f66.png" alt="06"></p> <p>发送端窗口的大小是由接受窗口决定的，接收端会告诉发送端自己的剩余窗口大小，然后发送端会再根据网络情况设置一个合适的大小。当发送端收到应答报文<strong>之后</strong>，会将滑动窗口向右滑动。</p> <p>如果给窗口字段设置为0，则发送方久无法发送数据了。</p> <p>如果出现发送失败需要重传的情况，会先处理发送窗口需要处理的其他数据段。</p> <p>滑动窗口可以让TCP实现流量控制功能，不然就会出现接收方网络差的要死（带宽已经占完），发送方还一直发数据的情况。</p> <h4 id="拥塞控制"><a href="#拥塞控制" class="header-anchor">#</a> 拥塞控制</h4> <p>当网络出现拥塞的时候，数据包就有可能会丢，此时发送方就会重传，但问题是你越传网络就会越堵啊。。。此时拥塞控制就显得很重要了。</p> <p><img src="/assets/img/07.46e70389.png" alt="07"></p> <p>TCP实现拥塞控制的四个算法</p> <ul><li>慢开始: 刚开始的时候慢点传数据，然后在传输的过程中将发送窗口逐渐指数级扩大，避免一开始就发送大量数据直接把网给搞炸，其实很好理解，想想你百度云下东西的时候是逐渐变快的，而不是上来就满宽带（PS：前提是你开了百度云Svip）。</li> <li>拥塞避免：当传输过程中发生拥塞时，发送窗口停止指数扩大，并将阈值设置为当前窗口的一半。发送窗口在每个RTT只会＋1。</li> <li>快重传：如果发送方收到三个相同的，此时便知道自己的接下来的数据没发出去，发送方会立即停止当前数据发送并快速发送没发出去的数据。</li> <li>快恢复：在执行快重传时，发送方知道自己只是丢了个别的报文段，没有必要慢开始，直接<strong>快恢复</strong>：将阈值砍一半，然后直接把窗口拉满（窗口值和阈值此时相等），然后执行拥塞避免算法。（既然丢数据那就说明网络有些顶不住了，转为拥塞避免算法是最为稳妥的选择。）</li></ul> <blockquote><p>当</p></blockquote> <h3 id="适用场景-2"><a href="#适用场景-2" class="header-anchor">#</a> 适用场景</h3> <p>强调数据完整性的应用，像下载器，企业客户端应用，HTTP，FTP等文件传输协议，POP，SMTP等邮件传输协议。</p></div> <footer class="page-edit" style="display:none;"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">4/22/2021, 5:42:12 PM</span></div></footer> <!----> <!----></main> <!----></div></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.553bbeff.js" defer></script><script src="/assets/js/3.8b0ceda2.js" defer></script><script src="/assets/js/1.ecdf2037.js" defer></script><script src="/assets/js/18.03b83e63.js" defer></script>
  </body>
</html>
